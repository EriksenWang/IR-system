{
    "title": "MODIS Snow Products User Guide to Collection 5",
    "publication_date": "2006-11",
    "authors": [
        {
            "full_name": "George A Riggs",
            "firstname": "George A",
            "lastname": "Riggs",
            "affiliations": []
        },
        {
            "full_name": "Dorothy K Hall",
            "firstname": "Dorothy K",
            "lastname": "Hall",
            "affiliations": []
        },
        {
            "full_name": "Vincent V Salomonson",
            "firstname": "Vincent V",
            "lastname": "Salomonson",
            "affiliations": []
        }
    ],
    "abstract": "N/A",
    "full_text": "The Snow User Guide to Collection 5 of the MODIS snow products has been infused and expanded with information regarding characteristics and quality of snow products at each level. A user should find information on characteristics and quality that affect interpretation and use of the products. In content this guide includes information and explanations that should enlighten a user's understanding of the products. Each product section of the guide has been expanded to include descriptions and explanations of characteristics and quality of the product and the online guide has links (or future links) to imagery and graphics exemplifying those characteristics.\n\nThe MODIS snow product suite is created as a sequence of products beginning with a swath (scene) and progressing, through spatial and temporal transformations, to a monthly global snow product. Each snow product in the sequence after the swath product assimilates accuracy and error from the preceding product. A user must understand how the accuracy and quality of that daily snow product is affected by the previous level(s) of input products. Distribution statistics from the DAAC reveal that the daily tile snow product is the most frequently distributed of the snow products. Review of the literature also shows that the daily and eight-day products are the most utilized products from the sequence of products. Therefore, understanding the assimilation of accuracy and error between levels and through higher levels is necessary to make optimal use of the products. Description of assimilated error and how it affects the accuracy of the product is included in each product section. A user may want to study the preceding product(s) description to enhance their understanding of the product accuracy.\n\nMODIS Terra and MODIS Aqua versions of the snow products are generated. This user guide applies to products generated from both sensors but is written based primarily on the Terra products. Bias to Terra is because the snow detection algorithm is based on use of near infrared data at 1.6 µm. A primary key to snow detection is the characteristic of snow to have high visible reflectance and low reflectance in the near infrared, MODIS band 6. MODIS band 6 (1.6 µm) on Terra is fully functional however, MODIS band 6 on Aqua is only about 30% functional; 70% of the band 6 detectors non-functional. That situation on Aqua caused a switch to band 7 (2.1 µm) for snow mapping in the swath level algorithm. The bias to Terra is also because of the greater understanding of the MODIS Terra sensor, pre-launch algorithm development, longer data record of Terra and greater amount of testing the Terra algorithms in preparation for Collection 5 processing. Discussion of reasons for the different bands and the effect on snow mapping are beyond the scope of this user guide but are discussed in the MODIS snow ATBD (modis-snow-ice.gsfc.nasa.gov/). Despite the different band usage, the snow map algorithms are very similar and the quality of snow mapping is very similar though subtle differences exist between the products. The higher level (Level-3) product algorithms are the same for Terra and Aqua. Similarities and differences between Terra and Aqua are presented in the appropriate product section.\n\nThe guide is organized into overview sections and data product sections. Overview sections cover commonalities in the data products or describe external sources of information relevant to the products. Data product sections are composed of a succinct algorithm description, data content description and explanations of error and characteristics that should enlighten a user's understanding of each snow product.\n\nCollection 5 reprocessing began in September 2006 starting the first day of MODIS science data acquisition, 24 February 2000. Collection 4 data will be available for at least six months after the date that data was reprocessed for Collection 5.\n\nFractional snow cover area has been added as a data array in the swath product for both Terra and Aqua.\n\nThe snow cover map with reduced cloud approach has been deleted from the data product.\n\nA fractional snow cover data array has been added to the product. Fractional snow cover data is input from the MOD10_L2 product.\n\nMonthly, global snow extent data product has been added to the sequence of MODIS snow products for both Terra and Aqua.\n\nThe bit encoded spatial quality assessment data has been replaced with an integer spatial quality assessment data value.\n\nA local attribute named \"Key\" has been included with all SDSs. This is the key to meaning of data values in the data array.\n\nA naming convention for the SDS was implemented so there is greater naming consistency through the data products. Some SDS names are different in Collection 5. New in Collection 5 is the use of HDF internal compression in the level-3 and higher products to reduce the volume of the data files in the archive and the amount of network resources required to transport the data files. The internal compression should be invisible to users and software packages that can read the HDF, HDF-EOS format. For the advanced user the internal compression does create Vgroup and Vdata within the product. The level-2 swath products are compressed using the NCSA HDF hrepack command line compression tool instead of internal compression coding which may or may not be invisible depending on software used to access the data products. It may be necessary to uncompress the data using hrepack. See http://hdf.ncsa.uiuc.edu/tools/hrepack/hrepack.html for information and usage.\n\nSnow data products are produced as a series of seven products. The sequence begins as a swath (scene) at a nominal pixel spatial resolution of 500 m with nominal swath coverage of 2330 km (across track) by 2030 km (along track, five minutes of MODIS scans). A summarized listing of the sequence of products is given in Table 1. Products in EOSDIS are labeled as Earth Science Data Type (ESDT), the ESDT label ShortName is used to identify the snow data products. The EOSDIS ShortName also indicates what spatial and temporal processing has been applied to the data product. Data product levels briefly described: Level 1B (L1B) is a swath (scene) of MODIS data geolocated to latitude and longitude centers of 1 km resolution pixels. A level 2 (L2) product is a geophysical product that remains in latitude and longitude orientation of L1B. A level 2 gridded (L2G) product is in a gridded format of a map projection. At L2G the data products are referred to as tiles, each tile being a piece, e.g. 10° x 10° area, of a map projection. L2 data products are gridded into L2G tiles by mapping the L2 pixels into cells of a tile in the map projection grid. The L2G algorithm creates a gridded product necessary for the level 3 products. A level 3 (L3) product is a geophysical product that has been temporally and or spatially manipulated, and is in a gridded map projection format and comes as a tile of the global grid. The MODIS L3 snow products are in the sinusoidal projection or geographic projection. Projections are defined using the USGS GCTP parameters.\n\nBrief descriptions of the snow data products are given here to give perspective to the sequence. Expanded descriptions of the snow products are given in following sections.\n\nThe first product, MOD10_L2, has snow cover maps (snow extent and fractional snow maps) at 500 m spatial resolution for a swath. The snow maps are the result of the algorithm identifying snow and other features in the scene. Geolocation data (latitude and longitude) at 5 km resolution are stored in the product. The second product, MOD10L2G, is a multidimensional data product created by mapping the pixels from the MOD10_L2 granules for a day to the appropriate Earth locations on the sinusoidal map projection, thus multiple observations, i.e. pixels, covering a geographic location (cell) in the tile are \"stacked\" on one another; all snow maps are included. Information on the pixels mapped into a cell is stored in pointer and geolocation products associated with the L2G product. The third product, MOD10A1, is a tile of daily snow cover maps at 500 m spatial resolution. The daily observation that is selected from multiple observations in a MOD10L2G cell is selected using a scoring algorithm to select the observation nearest local noon and closest to nadir. The fourth product, MOD10C1, is a daily global snow cover map in a geographic map projection. It is created by assembling MOD10A1 daily tiles and binning the 500 m cell observations to the 0.05° spatial resolution of the Climate Modeling Grid (CMG) cells. The eight day snow cover product, MOD10A2, is an eight-day composite of MOD10A1 to show maximum snow extent. The global eight-day snow cover product, MOD10C2, is created by assembling MOD10A2 daily tiles and binning the 500 m cell observations to the 0.05° spatial resolution of the CMG. The monthly snow cover product MOD10CM is a composite of the daily MOD10C1 maps for a month to map the maximum monthly snow cover. The MODIS snow products are archived in Hierarchical Data Format -Earth Observing System (HDF-EOS) format files. HDF, developed by the National Center for Supercomputing Applications (NCSA), is the standard archive format for EOS Data Information System (EOSDIS) products. The snow product files contain global attributes (metadata) and scientific data sets (SDSs) i.e. data arrays with local attributes. Unique in HDF-EOS data files is the use of HDF features to create point, swath, and grid structures to support geolocation of data. The geolocation information and relationships between data in a SDS and geographic coordinates (latitude and longitude or map projections) to support mapping the data supporting mapping stored as Vgroup and Vdata in the file. The SDSs are attached as data fields to the HDF-EOS swath or grid structure. The geolocation data can only be accessed from the StructMetadata.0 attribute. In order to geolocate the data the StructMetadata.0 must be accessed to get geographic information and the data fields, i.e. SDSs attached to it for mapping. It is possible to access the SDSs without having to access the StructMetadata.0 but the geolocation information will not be attached to the SDS. Users unfamiliar with HDF and HDF-EOS formats may wish to consult web sites listed in the Related Web Sites section for more information.\n\nSnow data product files contain three EOS Data Information System (EOSDIS) Core System (ECS) global attributes also referred to as metadata by ECS. These ECS global attributes; CoreMetadata.0, ArchiveMetadata.0 and StructMetadata.0 contain information relevant to production, archiving, user services, geolocation and analysis of data. The ECS global attributes are written in parameter value language (PVL) and are stored as a character string. Metadata and values are stored as objects within the PVL string. Products may also contain product specific attributes (PSAs) defined by the product developers as part of the ECS CoreMetadata.0 attribute. Geolocation and gridding relationships between HDF-EOS point, swath, and grid structures and the data are contained in the ECS global attribute, StructuralMetadata.0. Other information about mapping, algorithm version, processing and structure may be stored in the ArchiveMetadata.0 also in PVL or as separate global attributes. Other information about the product may be stored in global attributes separate from the ECS global attributes.\n\nStored with each SDS is a local attribute that is a key to the data values in the SDS. There may also be other local attributes with information about the data. Detailed descriptions of the SDSs are given for each snow product in following sections.\n\nA separate file containing metadata will accompany data products ordered from a DAAC. That metadata file will have an \".xml\" extension and is written in Extendable Markup Language. The .xml file contains some of the same metadata as in the product file but also has other information regarding archiving and user support services as well as some post production quality assessment (QA) information relevant to the granule ordered. The post production QA metadata may or may not be present depending on whether or not the data granule has been investigated. The \".xml\" file should be examined to determine if postproduction QA has been applied to the granule. (The Quality Assessment sections of this guide provide information on postproduction QA.) The data products were generated in the ECS science data production system using the HDF-EOS Version 5.2.9 , Science Data Processing (SDP) Toolkit, HDF API and the C programming language. Various software packages, commercial and public domain, are capable of accessing the HDF-EOS files.\n\nThe swath product is generated using the MODIS calibrated radiance data products (MOD02HKM and MOD021KM), the geolocation product (MOD03), and the cloud mask product (MOD35_L2) as inputs. The MODIS snow cover algorithm output product, MOD10_L2, contains two SDS of snow cover, a quality assessment (QA) SDS, latitude and longitude SDSs, local attributes and global attributes. The snow cover algorithm identifies snow-covered land, snow-covered ice on inland water and computes fractional snow cover. There are approximately 288 swaths of Terra orbits acquired in daylight so there are approximately 288 MOD10_L2 snow products per day. An example of the MOD10_L2 product snow cover map is exhibited in Figure 1a-c in both un-projected and projected formats.\n\nA sketch of the snow algorithm is given here for the purpose of aiding a user in understanding and interpreting the data product. The snow algorithm is described in detail in the Algorithm Theoretical Basis Document (ATBD).\n\nAnalysis for snow in a MODIS swath is done on pixels of land or of inland water that have nominal L1B radiance data, are in daylight and the cloud mask is applied. A snow decision is also screened for temperature and difference of a band ratio to reduce the occurrence of erroneous snow in some situations. Data inputs to the snow algorithm are listed in Table 2.\n\nLand and inland waters are masked with the 1 km resolution land/water mask, contained in the MODIS geolocation product (MOD03). In Collection 5 the land/water mask made by the Boston University (BU) team based on EOS data is used. During Collection 4 the BU land/water mask replaced the EOS land/water mask that had been used. (More information is given on the land/water mask in QA sections below.) The 1 km data of the land/water mask is applied to the four corresponding 500 m pixels in the snow algorithm. Ocean waters are not analyzed for snow. Inland waters, lakes and rivers, are analyzed for snowcovered ice conditions.\n\nThe MODIS L1B is screened for missing data and for unusable data. Unusable data results from the processing at L1B when the sensor radiance data fails to meet acceptable criteria. MODIS data may be unusable for several reasons. Specifics of L1B processing and criteria can be found at the MODIS Calibration Support Team (MCST) web page and in supporting documentation. If missing data is encountered those pixels are identified as missing data in MOD10_L2. If unusable data is encountered then a no decision result is written for those pixels. Usable L1B calibrated radiance data is converted to at-satellite reflectance for use in the snow algorithm.\n\nSnow covered area is determined through the use of two groups of grouped criteria tests for snow reflectance characteristics in the visible and nearinfrared regions and screening of snow decisions. Global criteria for snow is; a normalized snow difference index (NDSI), ((band 4-band 6) / (band 4 + band 6)) greater than 0.4 and near-infrared reflectance (band 2) greater than 0.11 and band 4 reflectance greater than 0.10. If a pixel passes that group of criteria tests it is identified as snow. The minimum reflectance tests screen low reflectance surfaces, e.g. water that may have a high NDSI value from being erroneously detected as snow. To enable detection of snow in dense vegetation a criteria test using NDSI and the normalized difference vegetation index (NDVI) of ((band 2-band 1) / (band 2+band 1)) is applied to pixels that have an NDSI value in the range of 0.1 to 0.4. In this criteria test a pixel with NDSI and NDVI values in a defined polygon of a scatter plot of the two indices and that has near-infrared reflectance in band 2 greater than 0.11 and band 1 reflectance greater than 0.1, is determined to be snow. This latter criteria test is applied without regard to the ecosystem. Snow-covered ice on inland water is determined by applying the global criteria for snow detection to pixels mapped as inland water by the landwater mask. Another screen is applied to the snow decision of all the above criteria tests to reduce erroneous snow detections. A surface temperature screen of 283 K is applied to prevent bright warm surfaces from being erroneously detected as snow. The screen functions to reduce the occurrence of erroneous snow detection in some situations and is described in subsections of the Quality Assessment section.\n\nIntermediate checks for theoretical bounding of reflectance data and the NDSI ratio are made in the algorithm. In theory, reflectance values should lie within the 0-100% range and the NDSI ratio should lie within the -1.0 to +1.0 range. Summary statistics are kept within the algorithm for pixels that exceed these theoretical limits; however, the test for snow is done regardless of violations of these limits. These violations suggest that error or other anomalies may have crept into the input data and indicate that further investigation may be warranted to uncover the causes.\n\nFractional snow cover is computed for all land and inland water body pixels in a swath. Fractional snow cover is calculated using the regression equation of Salomonson and Appel (2004 and in press). The fractional snow cover calculation is applied to the full range of NDSI values 0.0 -1.0. Fractional snow is constrained to upper limit of 100%. The fractional snow cover map and the snow cover map may be different. Fractional snow cover may have greater areal extent because its calculation is not restricted to the same NDSI range as is the snow cover area calculation. The fractional snow cover result is screened with the same screens as the snow cover area algorithm.\n\nClouds are masked using data from the MODIS Cloud Mask data product (MOD35_L2). The MOD35_L2 data is checked to determine if the cloud mask algorithm was applied to a pixel. If it was applied then results of the cloud mask algorithm are used. If it was not applied then the cloud mask is not used and the snow algorithm will process for snow assuming that the pixel is unobstructed by cloud. Only the summary cloud result, the unobstructed field-of-view flag, from MOD35_L2 is used to mask clouds in the snow algorithm. The day/night flag from the MOD35_L2 is also used to mask pixels that lie in night. Night is determined where the solar zenith angle is equal to or greater than 85º.\n\nThe snow cover map (Snow Cover Reduced Cloud SDS) made with selected cloud spectral tests from the cloud mask in Collection 4 is omitted in Collection 5. Though it was possible to reduce cloud obscuration in some situations or reduce cloud commission errors in others those advantages were outweighed by the disadvantage in situations where clouds where not mapped as clouds and thus as land by the snow algorithm, though it was actually snow covered land beneath the clouds. It is possible to make selective use of the cloud mask spectral tests and other data for snow mapping however, refinement of that approach was not pursued for Collection 5.\n\nResults of the fractional snow cover algorithm are stored as coded integers in the Fractional_Snow_Cover SDS. The fractional snow algorithm calculates fractional snow in the 0 -100% range, including inland water bodies. Pixels that are not identified as snow are labeled as water, cloud or other condition. A fractional snow map is shown in Figure 2. HDF predefined and custom local attributes are stored. The HDF predefined attributes may be used by some software packages. The custom local attributes are specific to the data in the SDS. Local attributes are listed in Table 4.\n\nCoarse resolution (5 km) latitude and longitude data for geolocating the snow data are located in the Latitude and Longitude SDSs. The latitude and longitude data correspond to a center pixel of a 5 km by 5 km block of pixels in the snow SDSs. The mapping relationship of geolocation data to the snow data is specified in the global attribute StructMetadata.0. Mapping relationship was created by the HDF-EOS SDPTK toolkit during production. Geolocation data is mapped to the snow data with an offset = 5 and increment = 10. The first element (1,1) in the geolocation SDSs corresponds to element (5,5) in Snow_Cover SDS; the algorithm then increments by 10 in the cross-track or along-track direction to map geolocation data to the Snow_Cover SDS elements. Local attributes are listed in Table 5 and Table 6. Quality Assessment A revised approach to quality assessment (QA) was used in Collection 5. Instead of the spatial QA data being bit encoded flags, as was done in Collection 4 and prior collections, integer numbers are coded to convey the QA information. The QA data should be easier to use and gives a general indicator of good or other quality for the data. Data quality is determined by making the same checks as in Collection 4 but the result is an integer value stored in the QA SDS.\n\nThe purpose of the spatial QA is to provide information each pixel that can be viewed in the same spatial context as the snow maps. The QA data may be used to help determine the usefulness of the snow cover and fractional snow data. The single QA SDS applies to both the snow cover area and fractional snow cover SDSs.\n\nThe quality assessment data provides an indication of the quality of the input data for the snow and fractional snow algorithms. Data for a pixel are determined to be of good quality, other quality or may be set to a thematic value for certain conditions. Unless the input data is unusable or missing the data quality will usually be set to good. An example of the snow cover pixel QA is shown in Figure 3. Local attributes are listed in Table 7. Indicators of quality are also given in metadata objects in the CoreMetadata.0 global attribute generated during production, or in post-product scientific and quality checks of the data product. Of the few quality metadata objects in the CoreMetadata.0 global attribute only the ScienceQualityFlagExplanation is relevant as a pointer to website for science quality status. No automatic quality assessment is done in the algorithm production nor is science quality checked during production.\n\nUnder ideal conditions of illumination, clear skies and several centimeters of snow on a smooth surface the snow algorithm is about 93-100% accurate at mapping snow (Hall and Riggs, submitted). Ideal conditions are usually not the norm so the snow algorithm was designed to identify snow globally in nearly any situation. The NDSI has proved to be a robust indicator of snow around the globe. The NDSI is a reliable indicator of snow when snow is present. Patchy snow or thin snow cover on vegetated surfaces may be missed by the NDSI.\n\nExperience and analysis of MODIS snow products over three collections of data have revealed strengths and weaknesses in the snow mapping technique. Originally the snow algorithm was designed to map snow globally and was unrestricted in global application. Robustness of the snow mapping algorithm is exhibited in the relatively rare errors of missing snow when snow is present. That approach maximized ability to detect snow and had the consequence of also increasing errors of commission, identifying non-snow features as snow, in the snow cover algorithm. Mapping features as snow, erroneous snow is a persistent problem with the snow algorithm affecting a relatively small percentage of the data. Analysis of erroneous snow-the mapping of features not snow as snow--has revealed causes for erroneous snow. Causes, corrections and solutions to alleviate erroneous snow mapping are presented in the following subsections.\n\nIn the first processing of MODIS data it was discovered that some surface features, e.g. salt pans or sandy beaches, were being mapped as snow because they had reflectance characteristics similar to snow, specifically the NDSI value of those features was similar to snow. Mismatch of the land/water mask used in processing to the geolocated MODIS data was and still is a problem. The majority of that erroneous snow occurred in climatically warm regions of the world where snow was not likely to occur in any season. The solution to this type of snow error was to apply a thermal screen to remove the error.\n\nThe surface temperature algorithm was taken from the sea ice algorithm, integrated into the snow algorithm and used as a screen to prevent very warm snow like pixels from being mapped. Any pixel identified as snow but that has an estimated temperature >283 K is changed to land. This screening is a rough estimate of surface temperature as the surface temperature is calculated as though the pixel is snow covered sea ice. That temperature screening was successful at greatly reducing the occurrence of erroneous snow in warm regions of the world and along warm coastal regions especially those with wide, sandy beaches.\n\nThe land/water mask in the MODIS geolocation product (MOD03) is used to control processing path in the snow algorithm. In Collection 5 the land/water mask stored in the geolocation product was developed by the MODIS science team at Boston University. That land/water mask contains many improvements over the previously used MODIS land/water mask. Accuracy of coastlines and location of water bodies is improved. Yet misalignment of coastlines with the geolocated MODIS swath data still exists. That misalignment causes erroneous snow mapping to occur along coastlines in several regions around the world. This problem is readily apparent in the Canadian Arctic Islands in the summer when the islands may have a snowy coastline. During the summer the Canadian Arctic islands appear to have snowy coastlines in places, obviously in error. During the transition seasons no snow error is apparent because snow cover is expected in those seasons. During boreal winter darkness no error is seen. The snow error appears seasonal but is year-round because of the land/water mask to image misalignment of coastlines.\n\nSnow error on coastlines in warm regions is usually removed by the temperature screen but not always. The mixed signal of ocean, beach and coastline misalignment remains as a minor problem.\n\nIn the new BU land/water mask, some, but not all, inland water bodies, rivers, lakes, etc. are included in the land/water mask. The BU group provides these insights to the land/water mask: A great amount of interpretation was involved in the mapping of these water bodies. Though it would seem a distinctly easy task to make a distinction between water and land it was very difficult. Difficulties were encountered gauging the size of water bodies due to turbidity conditions, amount of vegetation in water bodies and in boreal regions confusion between snow and ice and lack of frequent clear sky views for mapping. The end result is that water bodies exceeding 1 km in dimension are included. Water bodies less than 1 km in size were not included in the mask. Also water bodies of isolated single pixels in extent were excluded. As a result many inland rivers are discontinuous or absent. Features on the land/water mask toward the polar regions may be distorted and coastlines may display shearing due to the way the land/water mask was generated and projected. Missing water bodies are likely to have an effect on reflectance in the pixel(s) in which they occur.\n\nThe snow algorithm uses the land/water mask to direct the processing path to land or inland water body. For small water bodies differences between the land/water mask and what is imaged can lead to errors in the snow map in both classes of snow and ice-covered lakes. Errors at shores of larger water bodies may also occur as a result of misalignment of the mask and imagery. Snow mapping and lake ice mapping errors do occur in many situations. These errors are a very low amount commonly in the <= 0.001 percentage range of total pixels processed in a swath.\n\nMisidentification of rivers or lakes, either mapped or un-mapped in the land/water mask, as snow or lake ice may also occur if the water has high turbidity or if it is shallow with a bright bottom. Those conditions may have an NDSI value in the snow range and have characteristics, e.g. visible reflectance amount, similar to snow that are not blocked by the screens in the algorithm. Partially cloud obscured water bodies that are identified as probably clear can also sometimes be erroneously identified as ice-covered for similar reasons.\n\nThe code was revised so that the screen for surface temperature is also applied to water body pixels identified as snow-covered. Application of that screen in those situations has decreased significantly the snow errors associated with water bodies especially during the warm seasons.\n\nUnder low solar illumination conditions when an acquisition is hours away from the local solar noon, e.g. during boreal summer, or an acquisition is near or includes the day/night terminator snow errors can occur. Algorithm processing takes the day/night flag from the cloud mask (MOD35_L2) which defines daylight as an observation with solar zenith angle < 85 degrees. Low solar illumination conditions are processed for snow without consideration of the amount of radiation reaching the surface. That was originally by design --not limiting processing for certain conditions. Analysis has revealed that low illumination of some surface features, notably boreal vegetation types, results in reflectance amounts and features that may be confused with that of snow. Those same features under high illumination conditions, near solar noon, do not exhibit reflectance features similar to snow and are not mapped as snow. The low amount of radiation on the surface and consequently lower reflection from the features can cause them to have an NDSI in the snow range so are erroneously identified as snow. Because the low reflectance across the spectrum combined with the nature of a ratio can result in relatively small differences between the band 6 and band 4 to have a large NDSI ratio that may look like snow to the algorithm. In the swath product erroneous snow mapping caused by low illumination conditions may contribute up to around 5% error based on count of land pixels analyzed for snow in a swath.\n\nErroneous snow caused by low illumination conditions was carried forward into the daily snow product MOD10A1 and consequently the MOD10C1 snow product in V004 prior to 13 September 2004. That decreased the quality of the MOD10A1 and MOD10C1 snow maps. A reason that those erroneous snow observations were mapped into MOD10A1 was that the algorithm did not use solar zenith as a factor in scoring the observations. A new scoring algorithm that included solar zenith as a factor in scoring the observations was implemented in V004 on 13 September 2004. That new algorithm effectively chose observations from near local solar noon thus eliminating the problem of erroneous snow caused by low illumination from the MOD10A1, thus increasing its quality and in turn quality of the MOD10C1 snow map. However the erroneous snow problem remained in the MOD10_L2 product.\n\nSnow and cloud discrimination problems persist in the algorithm that result in typically very small amounts of erroneous snow mapped in some cloud situations. This error is associated with parts of ice clouds which appear yellow in a MODIS band 1, 4, 6 color display. The error occurs on parts of the clouds that lie in the shadow of other parts of the cloud or on parts that have a middling amount of reflectance. This problem is associated with these types of clouds and can occur in any season in about any location. Analysis has been focused on North America. The problem exhibits greatest impact on quality in summer when these cloud types/situations are more frequent and result in erroneous snow mapping. The amount of snow error attributable to these snow cloud situations is usually very small in terms of pixel counts, in the 0.001 to 0.1% range but may range up to about 3% depending on extent, type and pattern of clouds.\n\nThe source of error lies with those clouds not being mapped as certain cloud by the cloud mask because the clouds do not dominate the reflectance of the 1 km resolution cloud mask. When those missed clouds are processed in the snow algorithm they appear to have spectral features, particularly the NDSI that are more like snow than a not snow feature. The snow algorithm processes those pixels as not cloud and the NDSI signal being similar to snow causes the pixels to be identified as snow.\n\nSnow and cloud confusion errors of this type have been noticeably reduced in Collection 5 due to improvement of the cloud mask algorithm which currently detects these types of clouds more often thus classifying them correctly as cloud, and preventing them from being analyzed erroneously as snow. However great the improvement, there still remains albeit a very small amount of shaded yellow cloud that is not identified as cloud and is then mapped as snow in the snow algorithm.\n\nAt the edges of snow cover, in the mountains or on plains, the edge of the snow is frequently identified as cloud by the cloud mask algorithm. This problem is sometimes very obvious extending over several kilometers of sparse or thin snow at edge of a snow cover. Sometimes the problem is not so obvious occurring as only a pixel or two in width in the mountains. If there is a sharp boundary between 'deep' snow and snow free land the problem may not occur.\n\nThis problem appears to be related to a cloud spectral visible reflectance test in the cloud mask algorithm that gives a fairly confident result of cloud so the pixel is mapped as cloud. Investigation of the problem has been sporadic as it is a low priority compare to other snow problems and a possible solution to the problem has not been formulated though investigation done suggests that individual cloud spectral test(s) and processing path flags may need to be read to better understand and possibly solve the problem specific to snow mapping.\n\nThere are 11 global attributes in the MOD10_L2 product---three are ECS defined (CoreMetadata.0, ArchiveMetadata.0, and StructMetadata.0) and the others are specific to the product. These global attributes serve different purposes, such as search and order of products, mapping, product version tracking and evaluating a product. The ECS defined attributes are written as very long character strings in parameter value language (PVL) format. Descriptions of the global attributes are given in the following tables.\n\nCoreMetadata.0 and ArchiveMetadata.0 are global attributes in which information compiled about the product during product generation is archived. StructMetadata.0 contains information about the swath or grid mapping relevant to the product. A user wanting detailed explanations of the global attributes and related information should query the EOSDIS related web sites. The ArchiveMetadata.0 global attribute contains information relevant to version of the algorithm, production environment and geographic location of the data product. Contents are described in Table 9. The StructMetadata.0 global attribute is created by the HDF-EOS toolkit to specify the mapping relationships between the geolocation data and the snow cover data (SDSs) referred to as data fields in the structural metadata. Mapping relationships are unique in HDF-EOS and are stored in the product using HDF structures. Description of the mapping relationships is not given here. Use of HDF-EOS toolkit, other EOSDIS supplied toolkits, DAAC tools or other software packages may be used to geolocate the data or to transform it to other projections and/or data file formats.\n\nThe L2G product is the result of mapping all the MOD10_L2 swaths acquired during a day to grid cells of the Sinusoidal map projection. The Earth is divided into an array of 36 x 18, longitude by latitude, tiles, about 10°x10° in size in the Sinusoidal projection. The MODL2G algorithm was created as a generic gridding algorithm for many of the MODIS data products in the land discipline group, and was customized to each MODIS data product as necessary. See Wolfe et al. (1999) for a description of the gridding technique and product contents. The L2G algorithm maps pixels from the MOD10_L2 SDSs into cells of the projection. No calculations or analysis of snow is done at L2G. The MOD10_L2G and other L2G products are necessary intermediate products used as input to the daily snow cover algorithm generating the MOD10A1 product. The MOD10_L2G is not archived at the DAAC thus is not available for order through ECS. The other L2G products are archived at a DAAC and can be ordered.\n\nThe daily snow product is a tile of data gridded in the sinusoidal projection. Tiles are approximately 1200 x 1200 km (10°x10°) in area. Snow data arrays are produced by selecting the most favorable observation (pixel) from the multiple observations mapped to a cell of the MOD10_L2G gridded product from the MOD10_L2 swath product. In addition to the snow data arrays mapped in from the MOD10_L2G, snow albedo is calculated. There are four SDSs (or data fields) of snow data; snow cover map, fractional snow cover, snow albedo and QA in the data product file.\n\nThe daily snow cover map is constructed by examining the many observations acquired for a day mapped to cells of the grid by the L2G algorithm. A scoring algorithm is used to select an observation for the day. The scoring algorithm is based on location of pixel and solar elevation. Observations are scored based on distance from nadir, area of coverage in a grid cell and solar elevation. The object of the scoring is to select the observation closest to local noon time (highest solar elevation angle), nearest to nadir with greatest coverage that was mapped into the grid cell. Form of the scoring algorithm is; score = 0.5 * (solar elevation) + 0.3 * (distance from nadir) + 0.2 * (observation coverage)\n\nResults of the snow cover algorithm, a daily snow map of the region covered by the tile, are stored in the Snow_Cover_Day_Tile and per cell QA data for that snow map is stored in the Snow_Spatial_QA SDS. The snow cover data are stored as coded integer values, with values being the same as assigned in MOD10_L2.\n\nDaily fractional snow cover is determined from the many observations of fractional snow cover in the L2G product using the same observation scoring algorithm as used for the daily snow cover map. The fractional snow map for the day is stored in the Fractional_Snow_Cover SDS.\n\nSnow albedo is calculated for the visible and near infra-red bands using the MODIS land-surface reflectance product as input (Table 11 lists the inputs for the snow albedo algorithm). An anisotropic response function is used to correct for anisotropic scattering effects of snow in non-forested areas. Snow-covered forests are assumed to be Lambertian reflectors. Land cover type is read from the MODIS land cover product. Slope and aspect data for the correction is derived from the Global 30 Arcsecond (GTOPO30) digital elevation model (DEM) are stored for each tile as ancillary data files. The narrow band albedos are then converted to a broadband albedo for snow. Description of the snow albedo algorithm is given in Klein and Stroeve (2002). Snow albedo is calculated only for the cells that correspond to snow cover in the Snow_Cover_Day_Tile. Snow albedo is stored in the Snow_Albedo_Daily_Tile SDS.\n\nThe snow cover map is the result of selecting the most favorable observation of all the swath level observations mapped into a grid cell for the day. Mapped is snow, snow-covered water bodies (typically lakes or rivers) land, water, cloud or other condition. A color-coded image of a snow map is shown in Figure 6a. HDF predefined and custom local attributes are stored. The HDF predefined attributes may be used by some software packages. The custom local attributes are specific to the data in the SDS. Local attributes are listed in Table 14.\n\nThe fractional snow cover map is the result of selecting the most favorable observation of all the swath level observations mapped into a grid cell for the day using the scoring algorithm. Fractional snow is reported in the 0 -100% range, including inland water bodies. Pixels that are not snow are labeled as water, cloud or other condition. A color-coded image of a fractional snow map is shown in Figure 6b. HDF predefined and custom local attributes are stored. The HDF predefined attributes may be used by some software packages. The custom local attributes are specific to the data in the SDS. Local attributes are listed in Table 15.\n\nThe snow albedo algorithm result is stored as a map of the snow albebo for the tile. The snow albedo map corresponds to snow mapped in the snow cover map in Snow_Cover_Day_Tile SDS. Snow albedo is reported in the 0 -100 range and non-snow features are also mapped using different data values. A color-coded image of a snow albedo map is shown in Figure 6c. HDF predefined and custom local attributes are stored. The HDF predefined attributes may be used by some software packages. The custom local attributes are specific to the data in the SDS. Local attributes are listed in Table 16.\n\nSpatial QA data corresponding to the snow cover observation selected for the daily snow cover map is also selected and mapped into the Snow_Spatial_QA SDS. Snow albedo specific QA is not reported in Collection 5 because ways of expressing the QA of the snow albedo result are being investigated. (Refer to the snow project website for validation information.) It is anticipated that future evaluation and validation of snow albedo will lead to the definition and setting of QA data. Fractional snow specific QA data is also not reported because evaluation and validation of the product has not been completed (refer to the snow project website for validation information).\n\nThe daily snow product (snow cover map and fractional snow cover) inherits snow errors associated with the observation selected from the MOD10_L2 swath product. In this version of the algorithm no attempt was made to screen or correct snow errors in the input data. Efforts were focused on reducing the snow errors in the MOD10_L2 algorithm which would then result in reduction of snow errors in the MOD10A1 product. That approach has resulted in a reduction of snow errors being passed into the MOD10A1 snow cover map.\n\nThe mapping of the pixel observations from MOD10_L2 into the grid cells in the L2G process may result in a pixel being mapped into more that one grid cell. If that is the situation with an erroneous snow observation then it is possible that a single erroneous snow observation will be mapped into and selected for one or more cells in the MOD10A1 snow map. In that situation the extent of erroneous snow is seen to increase. These snow errors are problematic to users being readily apparent in some regions and seasons but not in others. Apparent errors may be screened by users by use of screens of their own design.\n\nA prominent feature along coast lines in some areas, e.g. Arctic regions during the summer season is a coating of snow. The snowy coastline is a result of swath image and land/water mask misalignment originating in the MOD10_L2 product. Until the misalignment situation is resolved these errors will exist. In warm regions or warm seasons in temperate regions of the world the coastal snow errors that might be caused by land/water mask misalignment are usually corrected by the thermal screen in MOD10_L2 thus do not appear or may have a seasonal appearance depending on the region.\n\nThough the MOD10A1 product is generated for Antarctica it is considered of very poor quality on the continent because of the great difficulty in identifying cloud cover and discriminating between cloud and snow there. A very obvious problem occurs when cloud is present but not identified as cloud by the cloud mask algorithm. In that situation the snow algorithm assumes a cloud free view and either identifies the surface as not snow covered or identifies the cloud as snow. In either case the result is wrong. Such confusion occurs fairly frequently, especially in coastal regions and is exhibited as patches of snow-free Antarctica surface. In MOD10A1 algorithm no action is taken to resolve the problem thus the problem is available for investigation. In the higher level snow products, e.g. MOD10C1, Antarctica is masked as 100% snow cover to eliminate the snow errors and generate a good visual product there but one that is not useful for scientific study.\n\nValidation and evaluation of the snow albedo data is ongoing. Snow albedo is estimated to be within 10% of surface measured snow albedo based on studies in the literature (Klein andStroeve, 2002, Tekeli et al., 2006) and unpublished evaluations. That estimate is based on best conditions for the algorithm however, in conditions difficult to calculate snow albedo, e.g., steep mountain terrain the snow albedo error is likely to be very large. Updates to snow albedo evaluation and validation will be posted on the snow project website.\n\nThere are 11 global attributes in the MOD10A1 product, three are ECS defined (CoreMetadata.0, ArchiveMetadata.0, and StructMetadata.0) and the others are specific to the product. These global attributes serve different purposes, such as search and order of products, mapping, and product version tracking and evaluating a product. The ECS defined attributes are written as very long character strings in parameter value language (PVL) format. Descriptions of the global attributes are given in the following tables. CoreMetadata.0 and ArchiveMetadata.0 are global attributes in which information compiled about the product during product generation is archived. StructMetadata.0 contains information about the swath or grid mapping relevant to the product. A user wanting detailed explanations of the global attributes and related information should query the EOSDIS related web sites. The StructMetadata.0 global attribute is created by the HDF-EOS toolkit to specify the mapping relationships between the map projection and the snow cover data (SDSs). Mapping relationships are unique in HDF-EOS and are stored in the product using HDF structures. Description of the mapping relationships is not given here. Use of HDF-EOS toolkit, other EOSDIS supplied toolkits, DAAC tools or other software packages may be used to geolocate the data or to transform it to other projections. Map projection parameters are from the GCTP.\n\nListing of the global attribute StructMetadata.0 in MOD10A1.StructMetadata.0 GROUP=SwathStructure END_GROUP=SwathStructure GROUP=GridStructure GROUP=GRID_1 GridName=\"MOD_Grid_Snow_500m\" XDim=2400 YDim=2400 UpperLeftPointMtrs=(-10007554.677000,5559752.598333) LowerRightMtrs=(-8895604.157333,4447802.078667) Projection=GCTP_SNSOID ProjParams=(6371007.181000,0,0,0,0,0,0,0,0,0,0,0,0) SphereCode=-\n\nThe daily global climate modeling grid (CMG), a geographic projection, snow product gives a global view of snow cover at 0.05° resolution (Fig. 7). Snow cover extent is mapped by processing the MOD10A1 products, approximately 320 tiles of land data, for a day into the CMG. Snow cover extent is expressed as a percentage of snow observed in a grid cell of the CMG at 0.05° resolution based on the MOD10A1 cells at 500 m mapped into a grid cell. A corresponding map of cloud cover percentage is also generated and stored. The snow and cloud percentage arrays can be used together to get a comprehensive view of snow and cloud extents for a day. Since the cells of the CMG may contain mixed features an expression of confidence in the extent of snow is determined and stored along with other QA data.\n\nA binning algorithm is used to calculate, snow cover, cloud cover, confidence index and quality assessment in a 0.05° CMG cell based on the 500 m MOD10A1 input data (Table 21). The binning algorithm generates the snow and cloud cover maps based the total number of observations of a class, e.g. snow, cloud, snow-free land, etc. and total number of land observations mapped into a cell of the CMG. Observations from all the input cells of the MOD10A1 corresponding to a CMG cell, approximately 3600 per CMG cell at the equator, are put in observation bins. Calculated snow maps are stored as SDSs in the MOD10C1 product. The objective of the algorithm and resulting product is to provide the user an estimate of snow cover extent that was observed in a CMG cell along with an estimate of how much of the land surface was obscured by clouds and an index that estimates the confidence in the estimates. The binning algorithm places the different classes of observations, e.g. snow, lake, cloud, etc into bins for each class. A land bin is used in MOD10C1 algorithm to sum all observations made of land, e.g. snow, snow-free land, cloud over land, etc. That sum of land counts is the basis for expressing the percentage of snow, cloud and the confidence index for each CMG cell. A CMG specific land base mask was made for use with the binning algorithm. The 0.05° land mask was derived from the University of Maryland 1km global land cover data set (http://glcf.umiacs.umd.edu/data/landcover/index.shtml). If a CMG cell contains 12% or greater land then it is considered land and analyzed; if less than 12% it is considered ocean. That threshold was selected as a balance that minimized snow errors along coasts yet was sensitive to mapping snow along coasts.\n\nThe percentage of snow given in cells of the \"Day_CMG_Snow_Cover\" SDS is calculated using the 500m data totals of the number of snow observations and count of other land observations in that cell for the day. Percentage of snow is then calculated as: percentage snow = 100 * count of snow observations/count of land observations. Cloud percentage of a CMG cell is calculated in the same way as the percentage of snow except that count of cloud observations is used. The same calculation is used because only land cells, same as those for snow calculation, are included in the calculation. Cloud percentage is stored in the \"Day_CMG_Cloud_Obscured\" SDS.\n\nThe confidence index was developed to provide users with an estimate of confidence in the snow value reported for a cell. Confidence index (CI) values are stored in the \"Day_CMG_Confidence_Index\" SDS. This index indicates how confident the algorithm is that the snow percentage in a cell is a good estimate based on data (snow, snow-free land, cloud, other) binned into the grid cell. A high CI is indicative of cloudless conditions and good data values and that the snow percentage reported is a very good estimate. A low CI is indicative of a lot of cloud cover and that snow percentage may not be a good estimate because of the cloud cover obscuring all or parts of a cell. A simplified example will be used to demonstrate the calculations for percent snow, percent cloud, and confidence index. A number of possible snow, cloud and land combinations and the CI calculated for them are listed in Table 22. The highest CI is always associated with clear view conditions at any percentage of snow cover. When clouds completely obscure the surface the CI is 0 because the surface is not seen. In situations where there are only snow and cloud observations in a cell the CI will be the same as the percent snow thus low values are indicative of extensive cloud cover and high values are indicative of low cloud cover. In situations where there is a mix of snow, cloud and land the CI is indicative of level of confidence that the reported snow percentage estimates the snow in the cell despite the cloud cover. In those situations CI has higher values with low cloud amounts at any snow amount but the CI decreases as cloud cover increased indicating decreased confidence in the estimated snow percentage.\n\nTable 22 Example of how CI relates to percent snow cover in a CMG cell. In this example there are a total of 50 input observations (cells) to the CMG cell. All observations are binned as snow, snow free land or cloud.\n\nSnow count Cloud count Land count % snow % cloud CI 0 0 50 0 0 100 25 0 25 50 0 100 50 0 0 100 0 100 0 25 25 0 50 50 0 50 0 0 100 0 25 25 0 50 50 50 10 40 0 20 80 20 40 10 0 80 20 80 25 10 15 25 10 80 10 25 15 20 50 50 40 5 5 80 5 90 5 5 40 5 5 90 5 35 10 5 70 30\n\nPolar darkness, a night condition, is handled by determining the latitude of the CMG cell nearest the equator that is full of night observations. All CMG cells poleward from that latitude are filled as night. Polar darkness is handled this way so that a neat demarcation of night and day is shown in the CMG.\n\nAntarctica has been masked as perennially snow covered. The masking was done to improve the visual quality of data display. During the summer season some coastal regions, mainly the Antarctic Peninsula, may be snow free for a brief period of time. Study of such areas should use the MOD10_L2 or MOD10A1 products.\n\nA mask of where occurrence of snow is extremely unlikely, e.g. the Amazon, the Sahara, Great Sandy Desert, is applied at the end of the algorithm to eliminate erroneous snow occurrence. Source of erroneous snow in those regions is the MOD10_L2 product where erroneous snow detection occurs and is carried forward through the processing levels to the CMG. At the CMG level the use of this extremely unlikely snow mask eliminates erroneous snow from the masked regions but will allow it in regions where snow may be a rare event.\n\nThe percentage of snow-covered land observed in the CMG cell is given in the \"Day_CMG_Snow_Cover\" SDS (Fig. 7a). Snow cover percentage is the fraction of snow covered land observed based on the entire amount of land mapped in the CMG grid cell. No attempt was made to interpret snow cover possibly obscured by cloud. Percentage of snow is reported in the range of 0-100%.\n\nThe percentage cloud obscuration for a cell is given in the \"Day_CMG_Cloud _Obscured\" SDS (Fig. 7b). The percentage of cloud is the count of cloud observations for the day based on the total number of land cells in the grid cell. That is the same basis as used to calculate the percentage of snow. A cell may range from clear, 0% cloud to completely cloud obscured, 100% cloud.\n\nAn index of the confidence in the snow observation being a good or poor estimate of snow cover in a cell is stored in this SDS. The CI ranges from 0 -100%.\n\nAn indicator of quality of the MOD10A1 observations that were mapped into a CMG cell is reported in the Snow_Spatial_QA SDS. This indicator is a summary representative of the quality of the MOD10A1 observations that were mapped into the CMG cell.\n\nTable 26 Local attributes for Snow_Spatial_QA SDS Attribute name Definition Value long_name* Long Name of the SDS Snow cover per cell QA units* SI units of the data, if any none format* How the data should be viewed, Fortran format notation I3 coordsys* Coordinate system to use for the data latitude, longitude valid_range* Max and min values within a selected data range 0-100 _FillValue* Data used to fill gaps in the swath 255 Mask_value Used for oceans 254 Cell_resolution Nominal grid cell resolution 0.05 deg Water_mask_la nd_threshold (%) Decision point to process a cell as land or water 12.00000 Antarctica_QA_ note Antarctica masked as perennial snow cover Antarctica deliberately mapped as snow. QA value set to 252. Key Key to meaning of data in the SDS 0=good quality, 1=other quality, 252=Antarctica mask, 253=data not mapped, 254=ocean mask, 255=fill * HDF predefined attribute names.\n\nPrimary sources of snow errors in MOD10C1 are the result of snow errors being propagated from the MOD10_L2 through the MOD10A1 product into the MOD10C1 product. Snow errors are typically manifest as lower fractions, 1-25% range, of fractional snow in the map. These snow errors are generally scattered around the globe but may be more frequent in temporal and spatial extent in some regions. Pattern of the snow errors on any day may have an appearance related to cloud cover for the day if the source of the error is snow/cloud confusion or cloud shadowed land. A user may want to mask all or part of this range, 1-25%, of fractional snow from use depending on application and interpretation by the user.\n\nErrors originating from causes described above are most obvious in temperate and subtropical climates in the summer months. During the summer months the errors may be screened from use by various methods that remove the erroneous snow but leave actual snow, e.g. snow-covered mountains, unaffected or minimally so. In transition seasons and winter erroneous snow is likely be more difficult to screen because snow is expected in those seasons, however there is indication errors like this occur less during the winter season. Analysis into possible seasonality affected occurrence of erroneous snow has not been undertaken.\n\nData from the snow cover and cloud obscured SDSs and CI could be used together to better understand the reported fractional snow observation. For example, if a completely snow-covered region was viewed and no clouds obstructed the view on that day then percentage of snow cover would be 100%. If that snow-covered region was viewed but there was 30% cloud obscuration that day then percentage of snow cover would be 70%. A user could use the cloud obscured data for the cell to determine that there was 30% cloud obscuration for that day and could use the CI to make an interpretation that only clouds and snow were observed in the cell. From that information it would be possible to make an interpretation, if desired, about snow cover existing or not under the cloud cover In situations of partially snow-covered and snow free land with partial cloud cover the snow, cloud and CI could be used to make an interpretation of snow cover on the ground despite the partial cloud cover. A user is encouraged to make best use of combinations of the data for interpretation relevant to their application Because of the poor quality of the snow products over Antarctica the continent is masked as perennial snow cover in the daily snow CMG product. That poor quality originates in the MOD10_L2 algorithm and is caused by the great difficulty in discriminating between clouds and snow over Antarctica. Masking was done to increase visual quality of the image but excludes Antarctica from scientific analysis.\n\nTo reduce erroneous snow mapping in regions of the world that climatologically should never have snow, a snow not possible mask was created and applied in the algorithm. The effect has been to eliminate erroneous snow in many parts of the world. Those erroneous snow errors were caused by either deeply shadowed surfaces or snow/cloud confusion errors on some types of clouds. The mask is spatial all seasonal climatology, so snow would not be possible in these areas during any season. Along some coasts some snow may appear as the snow impossible map and the product map are not perfectly aligned. Those errors originate with land/water mask misalignments from MOD10_L2 and passed forward to this level.\n\nThere are 11 global attributes in the MOD10A1 product, three are ECS defined (CoreMetadata.0, ArchiveMetadata.0, and StructMetadata.0) and the others are specific to the product. These global attributes serve different purposes, such as search and order of products, mapping, and product version tracking and evaluating a product. The ECS defined attributes are written as very long character strings in parameter value language (PVL) format. Descriptions of the global attributes are given in the following tables.\n\nCoreMetadata.0 and ArchiveMetadata.0 are global attributes in which information about the product during product generation is archived. StructMetadata.0 contains information about the swath or grid mapping relevant to the product. A user wanting detailed explanations of the global attributes and related information should query the EOSDIS related web sites.\n\nSnow cover over eight days is mapped as maximum snow extent (Fig. 8) and as a chronology of snow observations in the two SDS in this product. Eightday periods (Table 30) begin on the first day of the year and extend into the next year. An eight-day compositing period was chosen because that is the ground track repeat period of the Terra platform. The last eight-day period of a year extends into first few days of the next year. The product can be produced with two to eight days of input. There may not always be eight days of input, because of various reasons, so the user should check the attributes to determine what days observations were obtained or were missing in a period.\n\nTable 30: Eight-Day Periods Period No. Year Days 1 1-8 2 9-16 3 17-24 4 25-32 5 33-40 6 41-48 7 49-56 8 57-64 9 65-72 10 73-80 11 81-88 12 89-96 13 97-104 14 105-112 15 113-120 16 121-128 17 129-136 18 137-144 19 145-152 20 153-160 21 161-168 22 169-176 23 177-184 24 185-192 25 193-200 26 201-208 27 209-216 28 217-224 29 225-232 30 233-240 31 241-248 32 249-256 33 257-264 34 265-272 35 273-280 36 281-288 37 289-296 38 297-304 39 305-312 40 313-320 41 321-328 42 329-336 43 337-344 44 345-352 45 353-360 46 361-368* *Includes 2 or 3 days from next year, depending on leap year\n\nThe algorithm composites eight-days of input, MOD10A1, to generate a maximum snow extent for the period and tracks the chronology of snow observations. The multiple days of observations for a cell are examined. If snow cover is found for any day in the period then the cell in the \"Maximum_Snow_Extent\" SDS is labeled as snow. If no snow is found, but there is one value that occurs more than once, that value is placed in the cell (e.g. water on five days, cloud on one, land on one, and night on one, would be labeled water). Otherwise, if mixed observations occur, e.g. land and cloud over multiple days, the algorithm is biased to clear views in the period and will label a cell with what was observable. The logic minimizes cloud cover extent in that a cell would need to be cloud obscured for all days of observation to be labeled as cloud. If all the observations for a cell are analyzed but a result is not reached then that cell is labeled as no decision. A chronology of snow occurrence is recorded in the \"Eight_Day_Snow_Cover\" SDS. On days that snow is found the bit corresponding to that day, eight-days across the byte from right to left, is set to on. The input days are ordered from first to last day including placing any missing days in the order. The algorithm will generate a product if there are two or more days of input available. If there is only a single day of input the eight-day period the product will not be produced. All eight days of input may sometimes not be available due to data acquisition or production problems. The algorithm was designed to run will with fewer than eight days so that the data acquired could be processed even if one to six days of data is unavailable. Days used as input are identified in the global attributes.\n\nThe maximum snow extent for the period depicts where snow was observed on one or more days in the period (Fig. 8). HDF predefined and custom local attributes are stored. The HDF predefined attributes may be used by some software packages. The custom local attributes are specific to the data in the SDS. Local attributes are listed in Table 32.\n\nInput files are ordered chronologically in the algorithm and for days on which snow was observed a bit in the byte is set to on. Across a byte the days are ordered from right to left, bit 0 corresponds to day 1 of the eight-day period, bit 1 corresponds to day 2 of the eight-day period...bit 7 corresponds to day 8 of the eight-day period. A bit setting of off could mean that data for that day was missing or that cloud was observed or that snow was not observed. HDF predefined and custom local attributes are stored. The HDF predefined attributes may be used by some software packages. The custom local attributes are specific to the data in the SDS. Local attributes are listed in Table 33.\n\nTable 33 Local Attributes for Eight_Day_Snow_Cover SDS Attribute name Definition Value long_name* Long Name of the SDS Eight day snow cover chronobyte units* SI units of the data, if any bit format* How the data should be viewed, Fortran format notation I3 coordsys* Coordinate system to use for the data cartesian valid_range* Max and min values within a selected data range 0-255 _FillValue* Data used to fill gaps in the swath 0 Key Key to meaning of data in the SDS Snow occurrence in chronological order. Day in period ordered as 87654321 corresponds to bit order of 76543210. Bit value of 1 means snow was observed. Bit value of 0 means snow was not observed. * HDF predefined attribute names. Global Attributes ECS global attributes of CoreMetadata.0, ArchiveMetadata.0 and StructMetadata.0 are listed in Tables 34 and 35 and by listing. Other global attributes are given in Table 36.\n\nNo quality assessment (QA) data stored in the product. The rationale QA of the eight day composite product is being discussed. Automated QA is not done in the algorithm and the value of passing along the QA data for everyday of input was not a reasonable approach as little was to be gained from that data for the volume that would be used to store it.\n\nSnow errors from the MOD10A1 inputs are propagated into the eight-day product. The origin of the errors is snow/cloud confusion from the MOD10_L2 product. Snow errors of commission are manifest as snow in locations and seasons where snow is impossible or very unlikely. As the algorithm was designed to map maximum snow cover with no filtering for snow errors the error present is the maximum error in snow extent for the period. Errors from every day, which probably occur in different locations on different days, are mapped which increases the spatial extent of error in the snow map.\n\nScreening of snow errors is possible in some situations by using the maximum snow cover data and eight day snow cover data together. Typically, the snow errors associated with cloud shadows and snow/cloud confusion occur in different places on different days, typically they do not persist in the same location over an eight day period. If the assumption that snow errors exist on single days and that snow exists on two or more days is made. Single day snow errors may be screened by removing snow that was observed on only a single day in the period. A single day occurrence in the eight day snow cover data is indicated when the value is equal to two of a power 0 -7. That type of screen may work in the summer but pose problems in transition seasons or winter when single day snow cover may actually exist. Other options may be to limit analysis to certain geographic regions of interest in a tile, which may allow better logic for screening snow errors or to find persistent snow cover during the period. Reduction of snow errors will occur as a result of reducing the snow errors in the MOD10_L2 product.\n\nThe eight-day climate-modeling grid (CMG) snow-cover data product is generated by merging all the MOD10A2 products (tiles) for an eight-day period (Table 22) and binning that 500 m data to 0.05°, or about 5.6 km resolution to create a global CMG map of maximum snow extent (Fig. 9). Snow extent, cloud cover, confidence index and quality assessment data are included in the product.\n\nThe MOD10A2 500 m resolution data are mapped into the corresponding cell of the CMG. Approximately 120 observations go into each CMG cell. Input values are binned into categories of snow, cloud, night, etc. The percentages of snow, percentage of cloud, QA and confidence computed, based on the binning results for each cell of the CMG, and written into the appropriate SDSs. The basis for the percentage calculations is the amount of land in that cell determined from the base land extent map. A land base map used in binning the MOD10A2 data was created from the University of Maryland 1 km global land cover mask (http://glcf.umiacs.umd.edu/data/landcover/index.shtml ). The base land extent map indicates the amount of land in a CMG cell and is used to determine if the cell is processed for snow and is used in the calculation of the confidence index. A land percentage of 12% in a CMG cell is used as the threshold to determine that a cell is considered as land.\n\nAntarctica is arbitrarily mapped as perennial snow cover because Antarctica is 99% or greater snow covered. During the summer up to 1% may be snow-free mostly on the Antarctic Peninsula. Mapping Antarctica as always snow-covered was done to eliminate the errors of snow detection or snow/cloud discrimination that occur in the MOD10_L2 algorithm from being passed into the CMG product.\n\nA night condition, polar darkness, is handled by determining the latitude of the CMG cell nearest the equator that is full of night observations. All CMG cells poleward from that latitude are mapped as night. Night was handled that way so that a neat demarcation of night and day is shown in the CMG.\n\nA mask of where occurrence of snow is extremely unlikely, e.g. the Amazon, the Sahara, Great Sandy Desert, is applied at the end of the algorithm to eliminate erroneous snow occurrences. Source of erroneous snow is the MOD10_L2 product where false snow detection occurs and is carried forward through the processing levels. At the CMG level the use of this extremely unlikely snow mask eliminates erroneous snow from selected regions but will allow for snow detection in regions where snow may be a rare event.\n\nThere are four SDSs with local attributes and four global attributes written in the CMG product.\n\nThis SDS is the global map of maximum snow cover extent for the eight day period. Extent of snow cover observed, expressed as percentage of land in the CMG cell, is given. The valid range of snow cover extent is 0-100%.\n\nTable 37 Local attributes for Eight_Day_CMG_Snow_Cover Attribute name Definition Value long_name* Long Name of the SDS Eight day snow extent, 5km units* SI units of the data, if any none format* How the data should be viewed, Fortran format notation I3 coordsys* Coordinate system to use for the data latitude, longitude valid_range* Max and min values within a selected data range 0-100 _FillValue* Data used to fill gaps in the swath 255 Mask_value Used for oceans 254 Night_value For seasonal darkness 111 Water_mask_la nd_threshold (%) Decision point to process a cell as land or water 12.00000 Antarctica_sno w_note Antarctica masked as perennial snow cover Antarctica deliberately mapped as snow Key Key to meaning of data in the SDS 0-100=percent of snow in cell, 107=lake ice, 111=night, 237=inland water, 250=cloud obscured water, 253=data not mapped, 254=water mask, 255=fill * HDF predefined attribute names.\n\nThe CI indicates how much of the land surface was observed, not obscured by clouds. The greater the percentage of land observed the higher the confidence in the extent of snow. Cloud obstruction reduces the confidence index.\n\nThe cloud obscured data indicates how much of the land surface in the cell was persistently obscured during the eight-day period.\n\nThe QA data is indicative of the overall quality of data in the CMG cell. In Collection 5 the QA is not fully utilized. The QA value is set to good quality by default and is not changed unless the input data are unusable data. The logic for determining setting the QA of the eight-day product is being discussed.\n\nTable 40 Local attributes for Snow_Spatial_QA SDS Attribute name Definition Value long_name* Long Name of the SDS Snow cover per cell QA units* SI units of the data, if any none format* How the data should be viewed, Fortran format notation I3 coordsys* Coordinate system to use for the data latitude, longitude valid_range* Max and min values within a selected data range 0-100 _FillValue* Data used to fill gaps in the swath 255 Mask_value Used for oceans 254 Water_mask_la nd_threshold (%) Decision point to process a cell as land or water 12.00000 Antarctica_QA_ note Antarctica masked as perennial snow cover Antarctica deliberately mapped as snow. QA value set to 1. Key Key to meaning of data in the SDS 0=good quality, 1=other quality, 252=Antarctica mask, 253=data not mapped, 254=ocean mask, 255=fill * HDF predefined attribute names.\n\nSnow errors from the MOD10A2 inputs are propagated into the eight-day CMG product. Origin of the errors is the MOD10_L2 product and they have been maximized in extent in the MOD10A2 product. An unintended consequence of mapping maximum snow extent was to also maximize the extent of snow errors. Since no screens for snow errors were placed in the algorithm the errors propagate between product levels. At the eight day CMG level the errors pose a difficulty to using the entire range of snow percentage in all situations. However, a user may apply screens or filters to reduce the extent of snow errors in the snow cover extent map. The maximum snow cover extent map is generally reasonable if limited to 80% or greater snow percentage levels and occurrence of persistent cloud is accounted for. Snow errors of commission probably dominate the lower, e.g. less than 20% snow cover level in many situations.\n\nThere are four global attributes in the MOD10C2 product, three are ECS defined (CoreMetadata.0, ArchiveMetadata.0, and StructMetadata.0) and the others are product defined. These global attributes serve different purposes, such as search and order of products, mapping, and product version tracking and evaluating a product. The ECS defined attributes are written as very long character strings in parameter value language (PVL) format. Descriptions of the global attributes are given in the following tables.\n\nCoreMetadata.0 and ArchiveMetadata.0 are global attributes in which information compiled about the product during product generation is archived. StructMetadata.0 contains information about the grid mapping relevant to the product. A user wanting detailed explanations of the global attributes and related information should query the EOSDIS related web sites. that equation so that the contribution to the monthly mean will be greater than the daily snow observation. For example, a cell has 25% snow cover and the CI = 75 then the cell is determined to have (25%/75 * 100) = 33% fractional snow cover. Daily observations with a CI <= 70 are assigned either as 100% cloudy, night, missing or no decision.\n\nThere must be at least one day in the month for each cell with the CI > 70 in order for the mean snow cover to be computed for that cell of the monthly CMG. If that restriction is not met then the cell is reported as no decision.\n\nA second filter is applied to the calculated mean fractional snow cover of each cell to filter out those cells in which the magnitude of snow cover is less than 10%. Cells failing the filter are assigned 0% snow for the month. Cells with a low magnitude are considered suspect of being erroneous snow originating in the MOD10_L2 algorithm and being propagated through the sequence of snow products. The magnitude of snow is calculated as an average snow for all days with snow passing the first filter of CI > 70. For example; cell A has 20 days with CI = 100, 10 days have 100% snow and 10 days have 0% snow, the mean monthly snow = (10 * 100 + 10 * 0)/20 = 50%. The second filter would be calculated as (days of snow * CI)/days of snow, (10 * 100)/10 = 100%. That average is retained because the average snow magnitude was > 10. Cell B also has 20 days with CI = 100 however, the 10 days of snow are all 5%. In this case the snow magnitude is (5 * 10)/10 = 5 thus the cell is filtered out and the monthly snow average is set to 0%.\n\nMinimal QA is applied to the data. By default the QA is set to good quality and is changed only if all the input data is bad or if a masked class, e.g. ocean is applied.\n\nThe mean monthly fractional snow cover data is stored in this SDS. Mean monthly fractional snow is reported in the range 0-100% (Fig. 10). Other features are mapped with specific values, e.g. water feature = 254.\n\nMinimal QA is applied to the data during processing. By default the thematic QA is set to good quality and is changed only if all the input data is bad or if a masked class, e.g. ocean is applied.\n\nMinimal QA for each cell of the grid is written in this SDS.\n\nTable 46 Local attributes for Snow_Spatial_QA Attribute name Definition Value long_name* Long Name of the SDS Thematic QA map of the monthly snow units* SI units of the data, if any none format* How the data should be viewed, Fortran format notation I3 coordsys* Coordinate system to use for the data latitude, longitude valid_range* Max and min values within a selected data range 0-1 _FillValue* Data used to fill gaps in the swath 255 Cell_resolution Nominal grid cell resolution 0.05 deg Antarctica_sno w_note Antarctica masked as perennial snow cover Antarctica deliberately mapped as snow Key Key to meaning of data in the SDS 0=other quality, 1=good quality, 252=Antarctica mask, 254=water mask, 255=fill * HDF predefined attribute names.\n\nAnalysis of the quality of the MOD10CM has been limited to visual and qualitative comparative analysis of the monthly fractional snow maps. Prior to Collection 5 processing the MOD10CM generated in Collection 4 processing was available only by request from the PI. Few if any reports regarding analysis or evaluation of the MOD10CM appear in the literature to the present.\n\nOverall the MOD10CM appears to be a reasonable estimate of the mean monthly fractional snow cover when compared to other sources of global or regional snow maps. Validation status is Stage 1 but may change as evaluation and validation analysis is done on the product.\n\nThere are five global attributes in the MOD10CM product, three are ECS defined (CoreMetadata.0, ArchiveMetadata.0, and StructMetadata.0) and the others are product defined. These global attributes serve different purposes, such as search and order of products, mapping, and product version tracking and evaluating a product. The ECS defined attributes are written as very long character strings in parameter value language (PVL) format. Descriptions of the global attributes are given in the following tables.\n\nCoreMetadata.0 and ArchiveMetadata.0 are global attributes in which information compiled about the product during product generation is archived.\n\n* HDF predefined attribute names.\n\n* HDF predefined attribute names.\n\n* HDF predefined attribute names.\n\n* HDF predefined attribute names.\n\nScienceQualityFlagExplanation\n\n\"See http://landweb.nascom/nasa.gov/cgibin/QA_WWW/qaFlagPage.cgi?sat=terra the product Science Quality status.\"\n\n* HDF predefined attribute names.\n\n* HDF predefined attribute names.\n\n* HDF predefined attribute names.\n\n* HDF predefined attribute names."
}