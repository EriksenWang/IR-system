{
    "title": "N/A",
    "publication_date": "1996",
    "authors": [
        {
            "full_name": "D J Semmens",
            "firstname": "D J",
            "lastname": "Semmens",
            "affiliations": [
                {
                    "organization": "Documentation and User Manual; U.S. Department of Agriculture, Agricultural Research Service",
                    "address": {
                        "postcode": "ARS-1446"
                    }
                }
            ]
        },
        {
            "full_name": "S N Miller",
            "firstname": "S N",
            "lastname": "Miller",
            "affiliations": [
                {
                    "organization": "Documentation and User Manual; U.S. Department of Agriculture, Agricultural Research Service",
                    "address": {
                        "postcode": "ARS-1446"
                    }
                }
            ]
        },
        {
            "full_name": "M Hernandez",
            "firstname": "M",
            "lastname": "Hernandez",
            "affiliations": [
                {
                    "organization": "Documentation and User Manual; U.S. Department of Agriculture, Agricultural Research Service",
                    "address": {
                        "postcode": "ARS-1446"
                    }
                }
            ]
        },
        {
            "full_name": "I S Burns",
            "firstname": "I S",
            "lastname": "Burns",
            "affiliations": [
                {
                    "organization": "Documentation and User Manual; U.S. Department of Agriculture, Agricultural Research Service",
                    "address": {
                        "postcode": "ARS-1446"
                    }
                }
            ]
        },
        {
            "full_name": "W P Miller",
            "firstname": "W P",
            "lastname": "Miller",
            "affiliations": [
                {
                    "organization": "Documentation and User Manual; U.S. Department of Agriculture, Agricultural Research Service",
                    "address": {
                        "postcode": "ARS-1446"
                    }
                }
            ]
        },
        {
            "full_name": "D C Goodrich",
            "firstname": "D C",
            "lastname": "Goodrich",
            "affiliations": [
                {
                    "organization": "Documentation and User Manual; U.S. Department of Agriculture, Agricultural Research Service",
                    "address": {
                        "postcode": "ARS-1446"
                    }
                }
            ]
        },
        {
            "full_name": "W G Kepner",
            "firstname": "W G",
            "lastname": "Kepner",
            "affiliations": [
                {
                    "organization": "Documentation and User Manual; U.S. Department of Agriculture, Agricultural Research Service",
                    "address": {
                        "postcode": "ARS-1446"
                    }
                }
            ]
        }
    ],
    "abstract": "Planning and assessment in land and water resource management are evolving from simple, local-scale problems toward complex, spatially explicit regional ones. Such problems have to be addressed with distributed models that can compute runoff and erosion at different spatial and temporal scales. The extensive data requirements and the difficult task of building input parameter files, however, have long represented an obstacle to the timely and cost-effective use of such complex models by resource managers.\nThe USDA-ARS Southwest Watershed Research Center, in cooperation with the U.S. EPA Office of Research and Development, has developed a GIS tool to facilitate this process. A geographic information system (GIS) provides the framework within which spatially-distributed data are collected and used to prepare model input files and evaluate model results for two watershed runoff and erosion models: KINEROS2 and SWAT.\nAGWA is designed as a tool for performing relative assessment (change analysis) resulting from land cover/use change. Areas identified through large-scale assessment with SWAT as being most susceptible to change can be evaluated in more detail at smaller scales with KINEROS2. Results can be visualized as percent or absolute change for a variety of output and derived parameters. These features are intended to assist resource managers in identifying the most important areas for watershed restoration efforts and preventative measures.\nContents",
    "full_text": "The Automated Geospatial Watershed Assessment (AGWA) tool is a multipurpose hydrologic analysis system for use by watershed, water resource, land use, and biological resource managers and scientists in performing watershed-and basin-scale studies. It was developed by the U.S. Agricultural Research Service's Southwest Watershed Resource Center to address four objectives:\n\nThe AGWA extension for ArcView adds the 'AGWA Tools' menu to the View window, and must be run from an active view. The AGWA Tools menu is designed to reflect the order of tasks necessary to conduct a watershed assessment, which is broken out into five major steps:\n\n1. Watershed delineation and discretization 2. Land cover and soils parameterization 3. Writing a precipitation file for model input 4. Writing parameter files and running the chosen model 5. Viewing results\n\nIn more detail...\n\nStep 1: The user first creates a watershed outline, which is a grid based on the accumulated flow to the designated outlet (pour point) of the study area. A polygon shapefile is built from the watershed outline grid. The user then specifies the threshold of contributing area for the establishment of stream channels, and the watershed is divided into model elements required by the model of choice. From this point, the tasks are specific to the model that will be used, but both follow the same general process. If internal runoff gages for model validation or ponds/reservoirs are present in the discretization, they can be used to further subdivide the watershed.\n\nStep 2: AGWA is predicated on the presence of both land cover and soil GIS coverages. In step 2, the watershed is intersected with these data and parameters necessary for the hydrologic model runs are determined through a series of look-up tables. The hydrologic parameters are added to the polygon and stream channel tables.\n\nStep 3: Rainfall input files are built. For SWAT, the user must provide daily rainfall values for rainfall gages within and near the watershed. If multiple gages are present, AGWA will build a Thiessen polygon map and create an area-weighted rainfall file. For KINEROS, the user can select from a series of pre-defined rainfall events or choose to build his/her own rainfall file through an AGWA module. Precipitation files for model input are written from uniform (single gage) rainfall or distributed (multiple gage) rainfall data.\n\nStep 4: At this point, all necessary input data have been prepared: the watershed has been subdivided into model elements; hydrologic parameters have been determined for each element; rainfall files have been prepared. The user can proceed to run the hydrologic model of choice.\n\nStep 5: AGWA will automatically import the model results and add them to the polygon and stream maps' tables for display. A separate module controls the visualization of model results. The user can toggle between viewing the total depth or accumulated volume of runoff, erosion, and infiltration output for both upland and channel elements. This enables problem areas to be identified visually so that limited resources can be focused for maximum effectiveness. Model results can also be overlaid with other digital data layers to further prioritize management activities.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (8 of 66)11/5/2004 1:16:35 PM\n\nThe AGWA tool is not a stand alone program. It requires the Environmental Systems Research Institute's (ESRI) ArcView 3.x software and the Spatial Analyst Extension for working with grid-based data. AGWA is available in two releases, as an extension for BASINS 3.1 and as a stand alone extension, both requiring the aforementioned software. The AGWA tool is designed to run on Microsoft Windows versions 95, 98, NT 4.0, 2000, ME, and XP. Processor speed does have a significant impact on the time required to perform the watershed delineation and other tasks in AGWA. For reference, the following table lists the time required to delineate and discretize watersheds of different sizes at different levels of geometric complexity (contributing source area), using a Pentium III, 866 MHz with 256 Mb RAM.\n\nDiscretization Level (CSA) Watershed Area (km 2 ) Boundary Delineation Time 20% 10% 2.5% 150* 0:03 0:22 0:25 0:27 150 0:56 0:28 0:35 0:43 750 1:18 0:48 1:13 1:30 1940 2:03 2:50 2:45 3:20 3370 3:03 5:37 5:43 6:13 7550 6:50 9:05 9:30 10:36 * Data was clipped to small buffer around the watershed. Contents file:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (9 of 66)11/5/2004 1:16:35 PM\n\nThe AWGA tool comes as a collection of files that are necessary for its operation. These files are organized as follows in both agwa1_4.zip, and the AGWA CD:\n\n• ArcView extension agwa1_4.avx\n\n• Datafiles directory -database files and supplementary extensions (grid01.avx, and xtools.avx).\n\n• Models directory -model executables and associated files • GISdata directory -example data\n\n• Documents directory -presentations and example documents\n\n• Manual directory -user manual and associated files\n\nFor users downloading the file agwa1_4.zip please unzip these files and directories to a directory named AGWA, e.g. C:\\AGWA.\n\nFor users with an AGWA CD, please copy the entire AGWA directory to your computer, creating e.g. C:\\AGWA. Once this directory has been established you will need to change the permissions for it (everything is converted to 'read only' when written to the CD).\n\n•\n\nFor Windows 2000 and XP -Right click on the AGWA directory and uncheck the 'read only' box. When you click 'OK' or 'Apply', the Confirm Attribute Changes window (left) will pop up and prompt you to choose whether you would like to apply the change to just the specified AGWA directory, or to also include subfolders and files. Please select the latter as shown here to ensure that 'read-only' is unset for all files in the directory. When the AGWA directory and its associated subdirectories has been created on your hard drive:\n\n1. Drag or paste the extension file (agwa1_4.avx) into the \\ESRI\\AV_GIS30\\ARCVIEW\\EXT32\\ directory. Two supplementary extensions (grid01.avx, and xtools.avx) can optionally be copied from the 'datafiles' subdirectory to \\ESRI\\AV_GIS30\\ARCVIEW\\EXT32\\. These two extensions provide the user with additional capabilities when preparing data for AGWA, and potentially for analyzing results within ArcView. 2. Open ArcView and select 'Extensions...' from the 'File' menu. To activate the AGWA extension click the box next to its name in the Extensions window and then click 'Okay'. You are now ready to begin using AGWA, but be sure to read the File Management section first. If the two supplementary extensions will be used then then they can be turned on at this time as well, but these can be turned on/off and used at any time. 3. Optional but highly recommended -set an AGWA environmental variable on your computer:\n\nA. From the Start Menu select Settings --> Control Panel B. Double click on the 'System' icon C. From the System Properties window select the 'Advanced' tab, and then click the 'Environment Variables...' button. D. For the user variables, click on the 'New' button and set its name to 'AGWA' (without the quotes), and its value to 'C:\\AGWA' or wherever you have established your AGWA directory. This will give AGWA a head start in locating files and save you time in the long run. ** Do not use spaces anywhere in the path to this directory (e.g. \"C:\\My Documents\\AGWA\") because ArcView has problems dealing with file and folder names that contain spaces.\n\nA. From the Start Menu select Settings --> Control Panel B. Double click on the 'System' icon C. From the System Properties window select the 'Environment' tab, and then click the 'Environment Variables...' button. D. For the user variables, click on the 'New' button and set its name to 'AGWA' (without the quotes), and its value to 'C:\\AGWA' or wherever you have established your AGWA directory. This will give AGWA a head start in locating files and save you time in the long run. ** Do not use spaces anywhere in the path to this directory (e.g. \"C:\\My Documents\\AGWA\") because ArcView has problems dealing with file and folder names that contain spaces.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (10 of 66)11/5/2004 1:16:35 PM\n\nA. Open the file c:\\autoexec.bat in a text editor -this can be accomplished by right clicking on the file in the Explorer window and selecting 'Edit'. B. Add the following line to the autoexec.bat file: set AGWA=agwadir where 'agwadir' is the folder that will contain all your AGWA-related files and directories, for example: C:\\AGWA. Do not use spaces anywhere in the path to this directory (e.g. \"C:\\My Documents\\AGWA\") because ArcView has problems dealing with file and folder names that contain spaces. C. Restart your computer to activate the changes to autoexec.bat.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (11 of 66)11/5/2004 1:16:35 PM\n\nThe AGWA tool is designed to be used with geospatially referenced data, which includes most data types supported by ArcView. These include: coverages, shapefiles, and grids. Images can be used for reference within a view, but are not used directly by the AGWA tool. Specific data requirements for each of the model components are outlined below, and are described in more detail in the sections describing each component.\n\nFile management in any ArcView-based application is extremely important. ArcView projects maintain references to many files that are generated or used, and moving or deleting these files incorrectly will cause problems. Since this happens frequently when working and data directories are not fixed (i.e. user-selected or default directories), the AGWA extension manages them for you. When the AGWA extension is loaded into a project it prompts the user to select a name for a new project directory. This directory is then created and the project is automatically saved to it. In addition, several additional subdirectories are created for writing various input and output files used by AGWA. This, in combination with the option to set a system environmental variable 'AGWA', allows AGWA to locate many files without prompting the user, and in other instances when the user must select a file it opens the appropriate directory when asking the user to select a file.\n\nPrior to describing the AGWA data structure in more detail it is important to describe the various types of files used and created in an AGWA project. These files can be split into six categories: primary coverages/grids, secondary or temporary coverages/grids, primary tables, secondary or temporary tables, model executables, and model input/output files.\n\nPrimary Coverages/Grids -These include the major spatial data sets used in the watershed delineation, land cover and soils parameterization, and in writing the precipitation files: DEM, land cover, soils, and rain gages. These are all data sets that you will be likely to use more than once, and should be easily accessible. They can be located anywhere (locally is recommended to minimize processing time), but if they are moved after a project is created then ArcView will lose its reference to them and prompt you to relocate them (a tedious process). For your convenience, we suggest you store them in the 'gisdata' directory under your AGWA home directory. This is where AGWA will prompt you to look first if the data has not been previously added to the view.\n\nSecondary or Temporary Coverages/Grids -These include any coverages/grids (themes) generated during an AGWA project. Secondary themes are here taken to be those which may need to be accessed again, whereas temporary themes are generated as a byproduct of AGWA tasks. Both types are written automatically to the 'av_cwd' directory in your project directory, but the temporary themes are deleted when the task during which they were created is complete. Secondary themes continue to reside in the 'av_cwd' directory with names that are set to be the same as in the project so they can be easily identified. As with all themes in a project, the secondary themes should not be deleted until either the project is deleted, or after they are deleted from the project.\n\nSecondary themes generated during the course of a watershed assessment may include (in the order in which they are generated): ** Note that any themes generated by the user in a project with the AGWA extension loaded, but not using AGWA tools, will be written to the 'av_cwd' directory associated with the project.\n\nPrimary Tables -Running AGWA requires a suite of database files used at various stages in the watershed assessment. These files are provided with AGWA in the 'datafiles' directory, and should remain there to minimize inconvenience to the user. If the system environmental variable 'AGWA' is set, then every time one of these files is accessed AGWA automatically points to the 'datafiles' directory first. If the files are located elsewhere then the user will have to browse to that new location every time. If the environmental variable is not set then AGWA will open to the project directory. The primary tables include:\n\n• hgr.dbf -the hydraulic geometry relationships for watershed discretization, which are used to define channel geometries based on contributing source areas\n\n• final_kin_soil_lut.dbf -the soil lookup table for KINEROS, which is used to derive the model hydrologic parameters from the soil coverage codes • final_swat_soil_lut.dbf -the soil lookup table for SWAT, which is used to derive the model hydrologic parameters from the soil coverage codes • soil_lut.dbf -a secondary soil lookup table for SWAT • dsgnstrm.dbf -a file containing design storm information for different durations and return periods. At this writing it only contains data for SE Arizona.\n\n• wgnfiles.dbf -a file containing the weather generator stations in the western U.S. that are available in AGWA -for SWAT. This file contains pointers to the weather generator files, which are described in the model input/output files.\n\nTables -At various stages in a watershed assessment database files are generated by AGWA and/or the user and added to the project. These files are by default written to the various project subdirectories, and should remain there to minimize inconvenience to the user. By default, every time one of these files is accessed AGWA automatically points to the directory where it should reside. If the files are located elsewhere then the user will have to browse to that new location every time. These files include:\n\n• Rainfall tables -a rainfall database file for SWAT must be generated by the user and added to the project (it would be best if this is saved into the rainfall directory). In addition, uniform rainfall files for KINEROS that are entered by the user through the 'Design Storm Data Entry' dialog.\n\n• weights.dbf -this file is created as part of the Thiessen weighting during the generation of precipitation input files for SWAT, and is written to the 'av_cwd' directory. It is added to the project as a table, and may be helpful to view, but does not ever need to be modified by the user. It is overwritten every time a distributed precipitation file is generated for SWAT.\n\n• swatpptfiles.dbf -this file maintains a record of all the various combinations of watershed configuration, precipitation files, the location of the precipitation files, and the start/end dates for precipitation files. This file is written to the project subdirectory 'rainfall', and added to the project as a table. It is crucial to the process of running SWAT and must not be deleted from the rainfall directory.\n\nOutput tables -results from model simulations are written into channel and upland (plane) database files that are added to the project as tables. The names for these output files are simple modifications of the simulation name; the channel output tables have a 'c' before the simulation name, and upland tables have a 'p' before the simulation name. For KINEROS, the output table names end in '.out', and for SWAT the output table names end in '.res'.\n\nModel Executables -The KINEROS and SWAT executables are provided with AGWA, and should remain in the \\AGWA\\models directory for easy file:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (13 of 66)11/5/2004 1:16:35 PM access. If the system environmental variable 'AGWA' is set then both KINEROS and SWAT will run automatically, otherwise the first time the executables are called by AGWA during each session the user must point to the location where they are stored. For SWAT, AGWA places a copy of the executable into the simulation directory where the input parameter files are being written. This is a requirement of the SWAT model and the executable can be deleted once the model has been run if it will not be used again outside of AGWA.\n\nModel Input/Output Files -Model input and output files are generated each time either KINEROS or SWAT is run. AGWA controls where these files go in all instances, but there are some differences depending on the model.\n\nInput precipitation files (*.pre) are written to the 'rainfall' directory located in the project directory.\n\nEach time KINEROS is run, a file called 'kin.fil' located in the same directory as the KINEROS executable is modified to tell KINEROS which files to use in the simulation. This file is overwritten every time the model is run, and will be created if it somehow doesn't exist.\n\nAll KINEROS input parameter files (*.par) are written to a single subdirectory called 'kin_sims', which is located in the 'simulations' directory under the AGWA directory.\n\nAll KINEROS output files (*.out) are also written to the 'kin_sims' directory, which is located in the 'simulations' directory under the AGWA directory.\n\nFor each SWAT simulation a large number of input files are generated. Each of 11 file types are generated for each subwatershed in the watershed discretization, in addition to14 other supporting file types of which there can be multiple files. Including the executable and output file that is a total of 27 file types and frequently hundreds of files.\n\nIt is a requirement of SWAT that all files used in a simulation are located in a single directory. As a result, the SWAT executable, input and output files are all copied or written to a SWAT simulation subdirectory. To keep these myriad files from getting mixed up each simulation is stored in its own directory under the 'simulations' directory, and is named by the user.\n\nInput precipitation files generated for SWAT (*.pcp) are written to the subdirectory 'rainfall' under the AGWA directory, and then copied to the simulation subdirectory.\n\nElevation bands data files genereated for SWAT Thiessen Polygon Weighting are written to the subdirectory 'elev' under the 'rainfall' directory and then accessed when writing the SWAT input files.\n\nTemperature files (*.tmp). These can be generated on the fly, but are more reliable if created by the user. If generated on the fly they are written to the appropriate simulation subdirectory.\n\nThe working directory is the default location where ArcView will write coverages, grids, and tables generated during the watershed assessment process. When the AGWA extension is first turned on, the user is prompted to save/create a new project as shown below. AGWA will use the name provided by the user and create a standard project file structure. Given the project name \"agwa_proj\" under \"c: \\agwa\\projects\" as shown here, a directory will be created called \"c:\\agwa\\projects\\agwa_proj\\\", and the project will be named \"c:\\agwa\\projects\\agwa_proj \\agwa_proj.apr\". The current working directory for the project will be pointed to a folder called \"c:\\agwa \\projects\\agwa_proj\\av_cwd\".\n\nThe resultant file structure is shown here:\n\nAll files created by AGWA in the course of the project will be placed in the current working directory. Please note: even if a a project has been previously saved as another name, AGWA will force the user to save the project with a new name with the above-described file structure.\n\nA Note About Moving Spatial Data -It is important to remember that ArcView spatial data (coverages, themes, shapefiles, and grids) should not be moved from one directory into another using Microsoft Windows Explorer. This can create errors within the spatial data files, and should not be attempted unless the entire directory (up one level from the data sets themselves) in which the files reside is moved. Alternatively, if individual spatial data layers must be moved, then this should be done using ArcView. When a view is active, select 'Manage Data Sources' from the 'File' menu at the top of the screen. This will bring up a window that will enable you to transfer data layers from one directory to another without breaking the internal structure of spatial data files.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (15 of 66)11/5/2004 1:16:35 PM\n\nSince the development of the Stanford Watershed Model (Crawford and Linsley, 1966) numerous hydrologic models have been developed that use watersheds as the fundamental spatial unit to describe the various components of the hydrologic cycle. Watershed models have five basic components: watershed (hydrologic) processes and characteristics; input data; governing equations; initial and boundary conditions; and output (Singh, 1995). Despite their uniform general structure, however, various treatments of the five model components has resulted in a significant range of available model types. Distinguishing between these different model types is an important first step in selecting the appropriate model for a project.\n\nWatershed models are generally classified according to the method they use to describe the hydrologic processes, the spatial and temporal scales for which they are designed, and any specific conditions or intended use for which they are designed. Some knowledge of these components is highly recommended when selecting the combination that is best suited to a specific watershed and task.\n\nWatershed models can be divided into two main types according to how they treat the spatial component of watershed hydrology (figure 10a). Lumped, or lumped-parameter models treat an entire watershed as one unit and take no account of the spatial variability in processes, input, boundary conditions, or the hydrologic properties of the watershed. In contrast, distributed models ideally account for all spatial variability in the watershed explicitly by solving the governing equations for each pixel in a grid. In reality, neither of these extremes are suitable for watershed modeling because a lumped framework is a gross oversimplification and a distributed framework requires enormous amounts of data that is not readily obtainable. As a result most models have combined aspects of both approaches and subdivide the watershed into smaller elements with similar hydrologic properties that can be described by lumped parameters. This model type is commonly referred to as partially distributed, or quasidistributed.\n\nProcess-based classification of watershed models, after Singh (1995) The description of the hydrologic processes within a watershed model can be deterministic, stochastic, or some combination of the two. Deterministic models are models in which no random variables are used, i.e. for each unique set of input data the model will compute fixed, repeatable results (e.g. Law and Kelton, 1982). The governing equations describing the hydrologic and soil erosion processes in a deterministic model should be a major factor in selecting a model. Models with equations based on fundamental principles of physics or robust empirical methods are the most widely used in computing surface runoff and sediment yield. Stochastic models, in contrast, use distributions for each variable to generate random values for model input (e.g. Clarke, 1998). As a result, the output from a stochastic model is itself random, with its own distribution, and can thus be presented as a range of values with confidence limits.\n\nThe vast majority of watershed models are deterministic, including both KINEROS and SWAT. Fully stochastic models, in which all components of the model are stochastic, are virtually non-existent (Singh, 1995). Stochastic generation of input variables, however, is commonly used to optimize models, or determine model sensitivity to various input variables. If only parts of a model are described by the laws of probability then it is commonly referred to as quasi-deterministic, quasi-stochastic, or mixed.\n\nA watershed can range from as little as one hectare to hundreds of thousands of square kilometers. The spatial scale for which a model is designed can play a significant role in how specific processes are treated. Runoff in large watersheds (> 1000 km 2 ), for instance, is dominated by channel storage. In contrast, runoff from small watersheds (< 100 km 2 ) is dominated by overland flow. For intermediate watersheds it is important to account for the essential concept of homogeneity and averaging of hydrologic process in the models. Spatial scale is an important criterion in the selection of a model because the storage characteristics may vary at different watershed scales, that is, large watersheds have well developed channel networks and channel phase, and thus, channel storage is dominant. Such watersheds are less sensitive to short duration, high intensity rainfalls. On the other hand, small watersheds are dominated by the land phase and overland flow, have relatively less conspicuous channel phase, and are highly sensitive to high intensity, short duration rainfalls.\n\nHydrologic processes may occur at different time scales, therefore it is important to consider models that operate from event to daily to yearly time scales. At the event time scale, models typically do not compute inter-storm soil moisture conditions and therefore this information must be provided as an initial condition to initiate the model run. Event based models may be employed for storm events of relatively short duration or to finalize the design of technically complex structural and nonstructural management practices. On the other hand, continuous-time hydrologic models file:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (16 of 66)11/5/2004 1:16:35 PM can simulate precipitation, available surface storage, snowmelt, evapotranspiration, soil moisture, and infiltration in a seasonal framework. These models typically operate on a time interval ranging from a fraction of an hour to a day. The principal advantage of continuous modeling is that it can provide long-term series of water and pollutants loadings.\n\nMany studies have shown that the land uses within a watershed can account for much of the variability in stream water quality (Omernick, 1987;Hunsaker et al., 1992;Charbonneau and Kondolf, 1993;Roth et al., 1996). Agriculture on slopes greater than three percent, for example, increases the risk of erosion (Wischmeier and Smith 1978). A drastic change in vegetation cover, such as clear cutting in the Pacific northwest, can produce 90% more runoff than in watersheds unaltered by human practices (Franklin, 1992). The linkage between intact riparian areas and water quality is well established (Karr and Schlosser, 1978;Lowrance et al., 1984). For example, riparian habitats function as \"sponges\", greatly reducing nutrient and sediment runoff into streams (Peterjohn and Correll, 1984).\n\nThe percentage and location of natural land cover influences the amount of energy that is available to move water and materials (Hunsaker and Levine, 1995). Forested watersheds dissipate energy associated with rainfall, whereas watersheds with bare ground and anthropogenic cover are less able to do so (Franklin, 1992). The percentage of the watershed surface that is impermeable, due to urban and road surfaces, influences the volume of water that runs and increases the amount of sediment that can be moved (Arnold and Gibbons, 1996). Watersheds with highly erodible soils tend to have greater potential for soil loss and sediment delivery to streams than watersheds with non-erodible soils.\n\nMoreover, intense precipitation events may exceed the energy threshold and move large amounts of sediments across a degraded watershed (Junk et al., 1989;Sparks, 1995). It is during these events that human-induced landscape changes may manifest their greatest negative impact.\n\nA direct and powerful link exists between vegetation and hydrological processes in semi-arid environments. Vegetation plays a pivotal role in determining the amount and timing of the runoff which ultimately supplies mass and energy for the operation of hydrologic and erosive processes (Graf, 1988). Most analyses that assess the variability of sediment yield demonstrate that at the lower end of the precipitation scale (representing semi-arid conditions), small changes in annual precipitation bring about major changes in vegetation communities and associated sediment yields (Graf, 1988). For example, for a mean annual temperature of 10 o C, the Langbein and Schumm (1958) curve reaches a peak at an effective precipitation of about 300 mm (figure 10b), trailing off at lower values because of lower runoff totals and at higher ones because an increasingly abundant vegetation cover affords better protection against erosion.\n\n. Erosion as a function of precipitation. After Langbein & Schumm (1958) It should be clearly noted that methods for transforming various land cover and land use characteristics into distributed hydrologic model parameters are not well developed for a wide range of conditions. For management purposes, many approaches rely largely on empirical studies from large numbers of small plots and catchments to relate land cover and land use to effective hydrologic model parameters. The curve number method (Chow et al., 1988) and the USLE or RUSLE method for predicting soil erosion (Renard et al., 1997) are examples of this type of approach to related land cover/land use to hydrologic model parameters. The transformation of land cover/land use conditions into meaningful hydrologic and erosion parameters, and quantifying the associated uncertainty is a major challenge in watershed modeling.\n\nRecent papers (e.g. Roth et al., 1996;Weller et al., 1996) suggest that the importance of landscape features may change in different environmental settings, or when moving from one spatial scale to another. Therefore, methods to analyze and interpret broad spatial scales are becoming increasingly important for hydrological and ecological studies. Parameters and processes important at one scale are frequently not important or predictive at another scale, and information is often lost as spatial data are considered at coarser scales of resolution (Meentemeyer and Box, 1987). Furthermore, hydrological problems may also require the extrapolation of fine-scale measurement for the analysis of broad-scale phenomena. Therefore, the development of methods that will preserve information across scales or quantify the loss of information with changing scales has become a critical task. Wood et al. (1988) carried out an empirical averaging experiment to assess the impact of scale. They averaged runoff over small subwatersheds, aggregating the subwatersheds into larger watersheds, and repeating the averaging process. By plotting the mean runoff against mean subwatershed area, they noted that the variance decreased until it was rather negligible at a watershed scale of about 1 km 2 . That analysis has been repeated for the runoff ratio (Wood, 1994) and evaporation (Famiglietti and Wood, 1995) using data from Kings Creek, which was part of the FIFE `87 experiment. Results from the experiment show that at small scales there is extensive variability in both runoff and evaporation. This variability appears to be controlled by variability in soils and topography whose correlation length scales are on the order of 10 2 -10 3 m, typical of hillslopes. At an increased spatial scale, the increased sampling of hillslopes leads to a decrease in the difference between subwatershed responses. At some scale, the variance between hydrologic response for watersheds of the same scale should reach a minimum.\n\nSpatially distributed models of watershed hydrological processes have been developed to incorporate the spatial patterns of terrain, soils, and vegetation as estimated with the use of remote sensing and geographic information systems (GIS) (Band et al., 1991;1993;Famiglietti and Wood, 1991;1994;Moore and Grayson, 1991;Moore et al., 1993;Wigmosta et al., 1994;Star et al., 1997). This approach makes use of various algorithms to extract and represent watershed structure from digital elevation data. Land surfaces attributes are mapped into the watershed structure as estimated directly from remote sensing imagery (e.g. canopy leaf area index), digital terrain data (slope, aspect, contributing drainage area) or from digitized soil maps, such as soil texture or hydraulic conductivity assigned by soil series.\n\nOver the past decade numerous approaches have been developed for automated extraction of watershed structure from grid digital elevation models (e.g. Mark et al., 1984;O' Callagham and Mark, 1984;Band, 1986;Jenson and Dominque, 1988;Moore et al., 1988;Martz and Garbrecht, 1993;Garbrecht and Martz, 1993;1995;1996). O' Callagham and Mark (1984) define a digital elevation model (DEM) as any numerical representation of the elevation of all or part of a planetary surface, given as a function of geographic location. The most widely used method for the extraction of stream networks that has emerged is to accumulate the contributing area upslope of each pixel through a tree or network of cell to cell drainage paths and then prune the tree to a finite extent based on a threshold drainage area required to define a channel or to seek local morphological evidence in the terrain model that a channel or valley exists (Band and Moore, 1995).\n\nThe techniques used for delineation of the drainage path network by surface routing of drainage area and local identification of valley forms are ultimately dependent on a topographic signal generated in a local neighborhood on the DEM. As the approach is used to extract watershed structure with increasingly lower resolution terrain data, higher frequency topographic information is lost as the larger sampling dimensions of the grids act as a filter. Therefore, if watershed structural information is used to drive the hydrological model, the scaling behavior and consistency of the derived stream network with grid dimension needs to be addressed. One of the primary questions dealing with automated extracted channel network is that of the appropriate drainage density. Some authors suggest criteria to find this appropriate scale. For example, Goodrich (1991) found a drainage density of approximately 0.65 to 1.52 x 10-3m for watersheds greater than 1 hectare was adequate for kinematic runoff modeling in semi-arid regions. Similarly, La Barbera and Roth (1994) proposed a filtering procedure based on the identification of threshold value for the quantity ASk, where A is the contributing area, S the stream slope and k = 2. This procedure consists in the progressive removal from the drainage network of the first order stream which presents the minimum ASk value; the procedure is iterated up to a given target value for the area drained by first order streams. Calore et al. (1997) found that above a certain threshold, an increase in resolution in the spatial description of drainage networks obtained from a DEM cannot be directly linked to an increase of information. The criterion they used for assessing the amount of information contained in the drainage was based on the information entropy concept of Shannon (1948).\n\nLand use is an important watershed surface characteristic that affects infiltration, erosion, and evapotranspiration. Thus, almost any physically based hydrologic model uses some form of land use data or parameters based on these data (Spanner et al., 1990;1994;Nemani et al., 1993). Distributed models, in particular, need specific data on land use and their location within the basin. Some of the first research for adapting satellitederived land use data was done by Jackson et al. (1976) with the US Army Corps of Engineers STORM Model (US Army Corps of Engineers, 1976). However, most of the work on adapting remote sensing to hydrologic modeling has been with the Soil Conservation Service (SCS) runoff curve number model (US Department of Agriculture, 1972). The SCS model has been widely used in hydrology and water resources planning of agricultural areas. The model was originally developed for predicting runoff volumes from agricultural fields and small watersheds. However, it has been expanded for subsequent use in a wide variety of conditions at many basin sizes including urban and suburban areas. In early work with remotely sensed data, Jackson et al. (1977) demonstrated that land cover (particularly the percentage of impervious surface) could be used effectively in the STORM Model (US Army Corps of Engineers, 1976). In a study of the upper Anacostia River basin in Maryland, Ragan and Jackson (1980) demonstrated that Landsat-derived land use data could be used for calculating synthetic flood frequency relationships. Results can be erroneous if land use is mislabeled. A study by the US Army Corps of Engineers (Rango et al., 1983) estimated that any individual pixel may be incorrectly classified about one-third of the time. However, by aggregating land use over a significant area, the misclassification of land use can be reduced to about 2% (Engman and Gurney, 1991).\n\nMore recently, vegetation classification studies implementing digital satellite data have utilized higher spatial, spectral, and radiometric resolution Landsat Thematic Mapper (TM) data with much more powerful computer hardware and software. These studies have shown that the higher information content of TM data combined with the improvements in image processing power result in significant improvements in image processing power resulting in significant enhancement in classification accuracy for more distinctive classes (Congalton et al., 1998).\n\nA detailed analysis of the effects of the thematic accuracy of land cover is necessary before any attempt on using the hydrologic modeling tool to determine the vulnerability of semi-arid landscapes to land cover changes. The accuracy of maps made from remotely sensed data is measured by two types of criteria (Congalton and Green, 1999): location accuracy and, classification or thematic accuracy. Location accuracy refers to how precisely map items are located relative to their true location on the ground. Thematic accuracy refers to the accuracy of the map label in describing a class or condition on the earth. For example, if the earth's surface was classified as forest, thematic map accuracy procedures will determine whether or not forest has been accurately labeled forest or inaccurately labeled as another class, such as water.\n\nThe widespread acceptance and use of remotely sensed data has been and will continue to be dependent on the quality of the map information derived from it. However, map inaccuracies or error can occur at many steps throughout any remote sensing project. According to Congalton and Green (1999), the purpose of quantitative accuracy assessment is the identification and measurement of map errors. Quantitative accuracy assessment involves the comparison of a site on a map against reference information for the same site. The reference data is assumed to be correct.\n\nThe history of accuracy assessment of remotely sensed data is relatively short, beginning around 1975. Researchers, notably Hord and Brooner (1976), van Genderen and Lock (1977), proposed criteria and techniques for testing map accuracy. In the early 1980s more in-depth studies were conducted and new techniques proposed (Rosenfield et al., 1982;Congalton et al., 1983;and Aronoff, 1985). Finally, from the late 1980s up to present time, a great deal of work has been conducted on accuracy assessment. An important contribution is the error matrix, which compares information from reference sites to information on the map for a number of sample areas. The matrix is a square array of numbers set out in rows and columns that express the labels of samples assigned to a particular category in one classification relative to the labels of samples assigned to a particular category in another classification. One of the classifications, usually the columns, is assumed to be correct and is termed the reference data. The rows usually are used to display the map labels or classified data generated from remotely sensed data. Error matrices are very effective representation of map accuracy, because the individual accuracy of each map category are plainly described along with both errors of inclusion (commission errors) and errors of exclusion (omission errors) present in the map (Congalton and Green, 1999). A commission error occurs when an area is included in an incorrect category. An omission error occurs when an area is excluded from the category to which it belongs. In addition to clearly showing errors of omission and commission, the error matrix can be used to compute overall accuracy.\n\nSoils information derived from a GIS are generally gathered in a similar manner to vegetation, with the exception that remote sensing often cannot provide critical information about soil properties, especially if the soil is obscured by a vegetation canopy (Band and Moore, 1995). Substantial progress has been made in estimating near-surface and profile soil water content with active and passive microwave sensors and in the estimation of hydraulic properties by model inversion (e.g. Entekhabi et al., 1994). However, in general, soil spatial information is the least known of the land surface attributes relative to its well-known spatial variability that has been observed in many studies (Nielsen and Bouma, 1985).\n\nKINEROS utilizes a network of channels and planes to represent a watershed and the kinematic wave method to route water off the watershed (figure 10.1a). It is a physically-based model designed to simulate runoff and erosion for single storm events in small watersheds less than about 100 km 2 . More detailed technical information about KINEROS can be found at http://www.tucson.ars.ag.gov/kineros/.\n\nThe Soil and Water Assessment Tool (SWAT) (Arnold et al., 1994) was developed to predict the effect of alternative management decisions on water, sediment, and chemical yields with reasonable accuracy for ungaged rural basins. It is a distributed lumped-parameter model developed at the USDA Agricultural Research Service (ARS) to predict the impact of land management practices on water, sediment and agricultural chemical yields in large (basin scale) complex watersheds with varying soils, land use and management conditions over long periods of time (> 1 year). SWAT is a continuous-time model, i.e. a long-term yield model, using daily average input values, and is not designed to simulate detailed, single-event flood routing. Major components of the model include: hydrology, weather generator, sedimentation, soil temperature, crop growth, nutrients, pesticides, groundwater and lateral flow, and agricultural management. The Curve Number method is used to compute rainfall excess, and flow is routed through the channels using a variable storage coefficient method developed by Williams (1969). Additional information and the latest model updates can be found at http://www.brc.tamus.edu/swat/. Contents file:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html ( 19 of 66)11/5/2004 1:16:35 PM\n\nWatershed delineation is the first step in the process of using the AGWA tool. The Watershed Delineation dialog is called from the 'AGWA Tools' menu, and is used for both KINEROS or SWAT. This dialog requires that you enter the basic data types (described in Chapter 8) that are required to compute the watershed boundary and then divide the watershed into a series of planes or subwatersheds. The Watershed Delineation dialog is organized into 7 components:\n\n1. Digital Elevation Model (DEM) Input -If you have not already added a DEM to the view, you are given the option to do so here; otherwise, select the DEM for the watershed you would like to delineate from the combobox. Once a DEM is selected (it must be actively selected from the combobox), you are given the option of filling sinks. Sinks are isolated depressions in the elevation surface that can cause flow routing problems, and are common in USGS DEMs that have not been corrected. The 'Accept' button must be clicked before proceeding to the next step.\n\n2. Flow Direction Grid (FDG) Input -If a FDG for the DEM selected in step 1 has not already been added to the view you must click the 'Create FDG' button to create one and add it to the view, otherwise the FDG must be selected from the combobox to the left**. Click 'Accept' to proceed to the next step. (Note that this name will be used for two shapefiles: watershed configuration, and streams. To distinguish these from other shapefiles in the view the letter 'w' will be added to the beginning of the watershed configuration, and the letter 's' will be added to the streams.)\n\n6. Contributing Area Threshold Values -This step tells AGWA the contributing source area (CSA) that is required before flow becomes channelized. Smaller numbers result in a larger number of smaller planes and vice versa, so the CSA is a measure of the geometric complexity at which the watershed is discretized. The default value is 2.5% of the watershed area, and has produced the best results in a preliminary analysis. A more detailed investigation of and recommendations for appropriate CSA values is not yet complete. The CSA can be changed by entering a specific area (units of acres or hectares can be selected) or by entering a percentage of the watershed. Changing either one of these values causes the other to be updated, so it should be impossible to enter inconsistent values. Once the CSA value and units have been chosen click 'Accept' to proceed. 7. Model Selection -At this point you must choose which model you intend to develop the parameter file for: KINEROS or SWAT. It is important to note that the watershed shapefile you create is specific to the model you choose; a separate watershed shapefile will have to be created to run the other model. Once the model is selected click 'Continue' to select the hydraulic geometry relationship that will define the watershed channels. If a default hydraulic geometry was chosen via Advanced Options, selecting 'Continue' will bypass the Hydraulic Geometry dialog and begin the watershed discretization immediately.\n\n**If the DEM selected in step 1 has sinks and was not filled before creating the Flow Direction Grid, the Flow Direction Grid will have errors and will not appear in this combobox, preventing you from proceeding.\n\nA Note on Comboboxes -AGWA contains code to intelligently populate comboboxes based on the type of data it is expecting. If a combobox is empty, it is likely because the data is either not present in the project or not in the format AGWA requires.\n\nThe stream2500 grid (see image below) is a theme containing all of the streams for a specific DEM. It is created by selecting all cells from the flow accumulation grid with values greater than 2500. In other words, it represents all cells in the DEM to which greater than 2500 upstream cells contribute runoff. The stream2500 grid is used to guide the user in selecting a watershed outlet during the delineation process. Since there may be more than one DEM used for watershed delineations within a view, the name of the DEM used to derive a particular stream2500 grid is written into its comments, which can be viewed by clicking the 'Theme' menu and then selecting 'Properties'. The stream2500 grid does not require any attention from the user, and may be deleted with no consequence if desired.\n\nThe Watershed Outline window is designed to allow the user to designate the location of the watershed outlet. The first step is to select either a user-defined watershed outlet location, or a location in an active point coverage. The point location can come from any active point coverage or shapefile, allowing the user to place the watershed outlet at known locations. If no such coverage exists, then choose the 'user-defined outlet location' option. Depending on the option selected, enter the name of the outline to be created or select the point coverage that contains the desired point location and enter the name of the outline to be created. Proceed to selecting the outlet location by clicking on the appropriate button after choosing an outline name.\n\n** Remember that the buttons at the top of the window provide the functionality to pan and zoom within the view.\n\nWhen internal gages are used in the watershed discretization process the watershed map will be split at those locations where gages are present. This makes it possible to compare measured and computed discharge at a point or series of points. The same process is used when using SWAT reservoirs or KINEROS ponds and is described in greater detail in Chapter 11.4. ** Please note that if a gage point location is more than 100 map units (usually meters) from a channel created based on the contributing area threshold (CSA) value you entered for the discretization then AGWA will ask if you would like to proceed without that point or if you would like to stop and edit the point theme. Gages located within this 100 meter radius of a channel will be snapped onto the channel if not exactly on it already. Additionally, having gages in close proximity to one another is a known cause of problems with the watershed discretization.\n\nThe user is provided the option to include reservoir or pond elements when delineating the watershed. Pond and reservoir elements split the watershed map on the locations of the elements. To use ponds or reservoirs, select the point theme containing the pond/reservoir elements and the points to be included in the delineation process with the selection tool provided in the \"Pond Locations\" window. The point theme must contain an \"Id\" field with values corresponding to those in the pond/reservoir text files. After the delineation is complete, a new point theme is created of the ponds/reservoirs used during the process with a theme attribute table containing information specific to the model being applied.\n\nKINEROS ponds represent detention storage elements with inflow from one or two channels. Flow from the elements is uncontrolled.\n\nOne input text file is required for processing ponds with the KINEROS model. AGWA asks for this file when the user chooses to run the model. The comma-delimited file must be in the following format\n\n• ID, STOR, NUM • Volume, Discharge, Surface area ... ... • Volume, Discharge, Surface area • ID, STOR, NUM • Volume, Discharge, Surface area ... ... • Volume, Discharge, Surface area •\n\nSTOR, NUM ❍ 0.00, 0.00, 24959.11 ❍ 3833.24, 0.49, 25345.83 . . ❍ 28090.92, 1.31, 27728.55 ❍ 2, 0, 8 <-----------------ID, STOR, NUM ❍ 0.00, 0.00, 24959.11 ❍ 3833.24, 0.49, 25345.83 . . ❍ 28090.92, 1.31, 27728.55\n\nwith NUM number of lines per ID containing volume in m 3 , discharge in m 3 , and surface area in m 2 . STOR is the initial pond storage volume in m 3 . Each ID from the point theme used during the delineation process must have a set of entries in the text file. The formatting requirements are very specific, so the user should make an effort to follow the above format as closely as possible. For example, a decimal point must not follow any of the numbers in the ID, STOR, NUM line; alternatively, two numbers must follow the decimal point for each number on the subsequent lines.\n\n**Note that it is possible for the KINEROS pond elements to be overwhelmed. This occurs when the rainfall and runoff entering the pond element exceeds the volume and capacity of the pond element, as specified in the ponds input text file. This error may be hard to detect, because it may appear that KINEROS runs to completion, when in reality it failed on the pond element. If AGWA does not regain control after a KINEROS run using ponds, or the results are not imported properly, this is a clue that KINEROS did not run to completion. To fix this problem, increase the rating table for the pond by adding more values to the pond input text file.\n\nAt the completion of the delineation process, the user will be asked to supply the input text file for the reservoirs. The format of the file will depend on the Outflow Simulation Code selected in the \"Reservoir Inputs\" window (see image below). All reservoirs used in creating the watershed will use the same Outflow Simulation Code and all necessary inputs will be contained in a single text file.\n\nThe input files regardless of the Outflow Simulation Code must contain the following values in this order on ONE line: ID, MORES, IYRES, ESA, EVOL, PSA, PVOL, VOL, SED, NSED, K, FLOWMX1, FLOWMX2, FLOWMX3, FLOWMX4, FLOWMX5, FLOWMX6, FLOWMX7, FLOWMX8, FLOWMX9, FLOWMX10, FLOWMX11, FLOWMX12, FLOWMN1, FLOWMN2, FLOWMN3, FLOWMN4, FLOWMN5, FLOWMN6, FLOWMN7, FLOWMN8, FLOWMN9, FLOWMN10, FLOWMN11, FLOWMN12\n\nwhere ID is the point theme ID; MORES is the month the reservoir became operational; IYRES is the year the reservoir became operational (if either MORES or IYRES is 0, SWAT assumes the reservoir is operational at the start of the simulation); ESA is the reservoir surface area when filled to the emergency spillway (ha); EVOL is the volume of water needed to fill the reservoir to the emergency spillway (10 4 m 3 ); PSA is the reservoir surface area when filled to the principal spillway (ha); PVOL is the volume of water needed to fill the reservoir to the principal spillway (10 4 m 3 ); VOL is the initial reservoir volume (10 4 m 3 ); SED is the initial sediment concentration (mg/L); NSED is the equilibrium sediment concentration (mg/L); K is the hydraulic conductivity of the reservoir bottom (mm/hr); FLOWMX1-12 is the maximum daily outflow for the month (m 3 /s); and FLOWMN1-12 is the minimum daily outflow for the month (m 3 /s). For FLOWMX1-12 and FLOWMN1-12, you may set all months to zero if you do not want to trigger this requirement.\n\nAdditional input values are required for each of the outflow simulation options. The following inputs must appear immediately after the inputs listed above on the same line. It is important to note that all data associated with an ID is located on one line.\n\n• Outflow Simulation Code 0: ❍ RR, the average daily principal spillway release rate (m 3 /s). The following example is a reservoir with a point theme ID of 2. ❍ 2,0,0, 2444,17269,1445,6772,6772,350,350,0.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1000\n\n❍ RESMONO, the full path name of the text file containing monthly outflow data. The following example is a reservoir with a point theme ID of 2. 2,0,0, 2444,17269,1445,6772,6772,350,350,0.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, c:\\agwa\\projects\\agwa_proj\\reservoir.txt This monthly outflow data file is separate from the reservoirs input text file. It must be in the following format (comma-delimited):\n\n■ Line 1: can contain anything less than 80 characters (not used by SWAT) Each line after contains the monthly values for one year of the simulation. Ex: for reservoir #5 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0\n\nWhere FLOD1R is the beginning month of non-flood season; FLOD2R is the ending month of non-flood season; NDTARGR is the number of days required to reach target storage from current reservoir storage; STARG1-12 is the monthly target reservoir storage (10 4 m 3 ). The following example is a reservoir with a point theme ID of 2. 2,0,0, 2444,17269,1445,6772,6772,350,350,0.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 7,12,90,6772,6772,6772,6772,6772,6772,6772,6772,6772,6772,6772,6772 • Outflow Simulation Code 3: ❍ RESDAYO, the full path name of the text file containing daily outflow data. The following example is a reservoir with a point theme ID of 2. 2,0,0,2444,17269,1445,6772,6772,350,350,0.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, c:\\agwa\\projects\\agwa_proj\\reservoir.txt This daily outflow data file is separate from the reservoirs input text file. It must be in the following format: ■ Line 1: can contain anything less than 80 characters (not used by SWAT) Each line after contains the daily outflow value. There should be one line of data for each day of the simulation.\n\nData from the reservoir input text file is placed in a dbf-formatted table in the AGWA project. The structure of the table varies depending on the selected outflow code and follows the same order as the input text files. This table can be edited; however, the outflow simulation codes cannot be changed. When the user opts to run the simulation, AGWA looks for the pond theme (\"p\" + watershed name) and includes the pond elements in the routing file (.fig) as well as writing the reservoir data files (.res, which contains all of the reservoir data; .lwq, which derives no user-inputs from AGWA---these files contain the water quality data and can be modified in a text editor; daily or monthly outflow files, for code 1 or 3). **Currently, AGWA only offers SWAT users the option of using reservoirs, though SWAT does support ponds. (SWAT defines reservoirs as detention storage elements on a channel and ponds as detention storage elements within a plane. Also, AGWA supports only one reservoir per channel due to the delineation routines used, whereas SWAT allows up to 3 reservoirs per channel.)\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (24 of 66)11/5/2004 1:16:35 PM The final step in the watershed delineation and discretization process is to select a predefined hydraulic geometry relationship. The Hydraulic Geometry Relationships dialog has a dynamic appearance catered to both new users and experts. To prevent new users from becoming confused by the limited predefined relationships available, the default window (as seen at the right) appears with the Default Relationship radio button selected. The default relationship is the same relationship that has been used in all past AGWA releases, but was hidden away in the code.\n\nIf the user selects the Advanced Relationship radio button, the dialog's appearance will change and appear as it does below. The dialog now allows the user to select a predefined hydraulic geometry relationship from the HGR.dbf (located in the AGWA/datafiles directory). The dialog also allows the user to create a new relationship that will automatically be saved to the HGR. dbf table for future use. Additionally, if the user wants to make temporary adjustments (for the current discretization only) to a predefined relationship, this can be accomplished by clicking on the Custom buttons, allowing the user to change the coefficients and exponents in the corresponding equation. The advanced version of the dialog is useful for those intimately familiar with the watersheds with which they are working.\n\nAt the time of release, only two relationships are defined and come packaged with AGWA. These include a relationship for the Walnut Gulch Experimental Watershed located in Tombstone, AZ (Miller, 1995) and a relationship for North Carolina's Coastal Plain (Sweet and Geratz, 2003).\n\nThe relationships are known as bankfull hydraulic geometry relationships, and they define the bankfull channel width and depth based on watershed size. Bankfull hydraulic geometry relationships are very useful in that they define channel topography with minimal input and effort by the user. However, they have drawbacks too. The relationships are designed to be applied to very specific physiographic regions and outside of these regions the performance of the relationships in accurately depicting the channel geometries declines severely. Also, deriving relationships for specific regions is very labor intensive, requiring much field work and data analysis.\n\nAdditional hydraulic geometry options, such as setting a default relationship for all discretizations or redefining channel geometries for discretized watersheds, can be accessed through the AGWA Advanced Options Dialog.\n\nBefore running the KINEROS or SWAT models on your AGWA watershed, hydrologic parameters must be derived from the land cover and soil data and added to the attribute data of the watershed. The land cover and soils parameterization routine is not specific to either KINEROS or SWAT, but will add different parameters to the watershed theme attribute table depending on which model is selected during the watershed discretization.\n\nTo begin the Soil and Land Cover Parameterization, select 'Run Land Cover and Soils Parameterization' from the AGWA tools menu. The 'Soils and Land Cover Info' window will open, allowing you to select the watershed to parameterize and continue through the dialog. After choosing a watershed, select the radio button corresponding to the view that contains the land cover grid you wish to use and then select the appropriate grid from the combobox. Next, select the land cover type, NALC, MRLC, New York, or User-Defined. At this point, you can default to the look-up tables provided with AGWA or you may choose a customized look-up table to use with the land cover grid selected. If a User-Defined land cover was selected, you are forced to select a custom look-up table. At this writing, the NALC, MRLC, and New York land covers are the only data types for which look-up tables have been created, but you may still use customized or user-defined look-up tables. The available data types for which lookup tables have been created (NALC, MRLC/ NLCD, and NY) are described in more detail in the Data Requirements section of the manual. Once a data type has been selected, click 'Continue' to enable the Soils section of the dialog. Again, select the radio button corresponding to the view that contains the soils shapefile or coverage you wish to use and then select the theme from the combobox. The combobox is populated with all coverages and shapefiles for which attribute data contain the fields 'MUIR' (SSURGO Soils) or 'MUID' (STATSGO Soils). AGWA knows which of the two soil data types (STATSGO or SSURGO) has been selected based on the presence of one of these fields, and will prompt the user for additional information if necessary. Click 'Continue' once a soil theme has been selected.\n\nBefore proceeding with the soil and land cover parameterization, AGWA will check to make sure the selected watershed is completely contained within the selected soils theme. Unless your watershed theme is configured for SWAT and you're using SSURGO soils data, you have the ability to turn off the warning message seen to the right. To turn off the warning message, uncheck the appropriate checkbox in the 'Advanced Options' dialog, but remember this will turn off messages that may appear elsewhere in AGWA as well. Additionally, if the watershed theme is not contained by the soil theme, the parameterization of the watershed will be less accurate. To prevent AGWA from failing, you will not be able to proceed when using SWAT and SSURGO when the soil map is not large enough. ** If no soils themes (with one of the mentioned field names in the feature attribute table) are available in the selected view, AGWA will inform you of such. If no themes are present in either view simply click 'Cancel', add the data to the view, and then rerun 'Land Cover and Soils Parameterization' from the AGWA Tools menu.\n\nThe following section outlines the logic used in deriving hydrologic parameters for input into KINEROS based on the STATSGO soils data. The process is designed such that the relationship between soil texture and associated hydrologic parameter values can be manipulated by the user if deemed necessary. To make this relationship as transparent as possible the parameter values associated with each soil texture are provided in the form of an editable look-up table (Table 12.1a, kin_lut.dbf) that is referenced when soil properties are weighted for each model element.\n\nTo get an average value for each of the KINEROS input parameters on each model element AGWA performs both depth and area weighting of texture properties. To explain this process it is prudent to first convey how STATSGO stores soil texture information. STATSGO soil types are uniquely distinguished by an MUID (map unit ID) field or identifier. When downloading STATSGO data from the web you obtain a simple shapefile with polygons, each characterized by a single MUID. For each MUID, however, there are predefined components that describe the spatial variation within a particular soil type. For instance, there may be 3 components associated with MUID = AZ061 (see figure below). Each component makes up a certain percentage of the larger soil type (MUID), and the component percentages necessarily sum to 1. Component information for each MUID is stored in a file called 'statsgoc.dbf' which is located in the project's data directory.\n\nTo account for soil variability with depth each MUID component can have multiple layers. For KINEROS, AGWA is primarily concerned with the uppermost 9 inches of soil because of its dominant influence on event runoff. As a result, parameter values associated with soil textures within the uppermost 9 inches of a component soil must be weighted by depth/thickness to get an average value. Layer information for each component is stored in a file called 'statsgol.dbf', and again this is located in the project's data directory.\n\n0.000 0.000 0.000 0.000 0.250 L 13.00 108.0 0.463 0.940 0.400 42.00 39.00 19.00 0.250 0.420 LCOS 61.00 63.00 0.437 0.920 0.850 83.00 7.000 10.00 0.550 0.180 LFS 61.00 63.00 0.437 0.920 0.850 83.00 7.000 10.00 0.550 0.250 LS 61.00 63.00 0.437 0.920 0.850 83.00 7.000 10.00 0.550 0.230 LVFS 61.00 63.00 0.437 0.920 0.850 83.00 7.000 10.00 0.550 0.440 MUCK 0.600 407.0 0.475 0.810 0.500 27.00 23.00 50.00 0.160 0.020 PC 26.00 127.0 0.453 0.910 1.900 65.00 23.00 12.00 0.380 0.320 PEAT 0.600 407.0 0.475 0.810 0.500 27.00 23.00 50.00 0.160 0.020 S 210.0 46.00 0.437 0.950 0.690 91.00 1.000 8.000 0.690 0.180 SC 1.200 302.0 0.430 0.750 1.000 50.00 4.000 46.00 0.340 0.360 SCL 4.300 263.0 0.398 0.830 0.600 59.00 11.00 30.00 0.400 0.360 SI 3.000 260.0 0.450 0.920 0.550 8.000 81.00 11.00 0.130 0.430 SIC 0.900 375.0 0.479 0.880 0.920 9.000 45.00 46.00 0.150 0.310 soil type (MUID) in each subwatershed and writes it to the attribute table. This happens in the ws.soil.process.swat script.\n\nIn addition to the soil-derived parameters added to the watershed attribute table, there are several additional parameters derived from the STATSGO data that ultimately go directly into the SWAT input soil (.sol) file for each subwatershed. These include:\n\n• USLE K Factor (Kff in Statsgo) • Saturated hydraulic conductivity • Bulk density • Available water capacity • Organic carbon content • Percent clay • Percent silt • Percent sand • Percent rock (>3mm) by weight • Layer thickness\n\nThese parameters are derived entirely from the STATSGO tables (as opposed to the AGWA look-up table, kin_lut.dbf), and weighted according to a different scheme than the other parameters because our objective with these is to describe an average soil profile for each MUID. To do this we select the first layer for all components in an MUID, and weight the above parameters according to the component percent to get average values for that layer. This process is repeated for up to 6 layers, if present, and the values are written into a file named 'watershed name + _soil_lut.dbf' in the ws.statsgo.weighting.swat script. This file name starts with the watershed name to ensure that AGWA will be able to find the file for a specific watershed when the user selects 'Write output and run SWAT'. This file is added to the project tables, and stored in the project av_cwd directory. When writing the SWAT input files (ws.write.swat script), AGWA queries the watershed_name_soil_lut.dbf file based on dominant MUID from the watershed attribute table, and writes layer information to a soil (.sol) file for each subwatershed.\n\nSince the STATSGO tables are sometimes missing data, three procedures are in place to ensure that appropriate values are obtained for the soil layer parameters.\n\nThe sand, silt, and clay fractions are manipulated and normalized to ensure that they sum to 1. If the USLE K factor (Kff in STATSGO) is 0 (i.e. non-erodible soil), then we obtain the Kff value from the AGWA look-up table kin_lut.dbf for that particular soil texture.\n\nAll Other missing values from the STATSGO tables are set to 0.\n\nSSURGO soil weighting for KINEROS follows basically the same procedure as the STATSGO soil weighting, with a few minor exceptions. SSURGO data is generally downloaded by county in zip files containing three directories: cov, shp, and tables. It does not matter where you store these directories on you computer, and you may add either the coverage or shapefile to your view for the soils parameterization. In both the shp and cov directories there will be multiple data layers, most of which are not needed. Generally you want the data layer with the two-character state abbreviation, three-digit number, and '_a', e.g. AZ671_a. This should visibly be the obvious choice if you preview all of the layers. SSURGO data for KINEROS does not require any special steps or set up to be used by AGWA. Simply add the SSURGO data to your view just as you would for STATSGO data. AGWA recognizes these two types of soils data by the presence of a map unit ID field: MUID for STATSGO, and MUIR for SSURGO. All shapefiles/coverages that contain one of these fields will be added to your list of choices for soils data in the Soil and Land Cover Info dialog. AGWA will also know exactly which type of data has been selected based on this field name.\n\nOnce a SSURGO dataset has been selected you will be prompted to locate a file called comp.txt. This file is located in the 'tables' directory that came with your SSURGO data, so you will need to point to this directory to find it. Once you have pointed out the location of comp.txt, AGWA takes two additional files from that directory: chtexgrp.txt, and chorizon.txt. These three files are in a special format that cannot be easily read by standard database/spreadsheet software, so AGWA parses through each file, modifies illegal characters, and reads the text into ArcView database files. The files are written to the av_cwd directory, and added as tables to the project with the following names:\n\nThe horizon and texture database files are joined to create the equivalent of the STATSGO layer database file, and weighting proceeds according to the exact same methodology as described for STATSGO for KINEROS.\n\nSSURGO soil weighting for SWAT follows similar weighting procedures to the STATSGO soil weighting for SWAT. Regarding data requirements and importing, SSURGO for SWAT is the same as SSURGO for KINEROS. The SSURGO data is downloaded by county in zip files containing three directories: cov, shp, and tables. Like KINEROS, the location of these data do not matter, and either the coverage or shapefile may be added to your view for the soils parameterization. In both the shp and cov directories there will be multiple data layers, most of which are not needed. Generally you want the data layer with the two-character state abbreviation, three-digit number, and '_a', e.g. AZ671_a. This should visibly be the obvious choice if you preview all of the layers.\n\nSSURGO data for SWAT does not require any special steps or set up to be used by AGWA. Simply add the SSURGO data to your view just as you would for STATSGO data. AGWA recognizes and differentiates between these two types of soils data by the presence of a map unit ID field: MUID for STATSGO, and MUIR for SSURGO. All shapefiles/coverages that contain one of these fields will be added to your list of choices for soils data in the Soil and Land Cover Info dialog. AGWA will also know exactly which type of data has been selected based on this field name.\n\nOnce a SSURGO dataset has been selected you will be prompted to locate a file called comp.txt. This file is located in the 'tables' directory that came with your SSURGO data, so you will need to point to this directory to find it. Once you have pointed out the location of comp.txt, AGWA takes two additional files from that directory: chtexgrp.txt, and chorizon.txt. These three files are in a special format that cannot be easily read by standard database/spreadsheet software, so AGWA parses through each file, modifies illegal characters, and reads the text into ArcView database files. The files are written to the av_cwd directory, and added as tables to the project with the following names:\n\nThe horizon and texture database files are joined to create the equivalent of the STATSGO layer database file, and weighting proceeds according to the same methodology as described for STATSGO for SWAT.\n\nThe following section describes the logic used in deriving hydrologic parameters for input into KINEROS2 based on the FAO soils data. The procedures generally follow the same steps as those used for STATSGO soils, with a few exceptions noted below.\n\nAll soils data were obtained either from the Food and Agriculture Organization of the United Nations (FAO/UNESCO, 2003) Soil Map of the World CD-ROM, or from C.A. Reynolds research (Reynolds, et al., 1999).\n\nYou must be using a current version of AGWA that includes the capability to use FAO soils.\n\nTo run FAO soils in AGWA, you must copy the four FAO look-up tables to the c:\\AGWA\\datafiles directory and add them to the project. The four FAO tables are:\n\nIn addition, you must have the latest kin_lut.dbf table that includes the FAO soil textures.\n\nAGWA works the same on FAO soils as it does on the other soils databases. To get an average value for each of the KINEROS input parameters on each model element, AGWA performs an area weighting of soil properties based on soil texture. To get the soil texture, AGWA must first get the unique FAO mapping unit number, the snum. This mapping unit number is used to reference the FAO tables to obtain the FAO soil identifier name and the individual soil-units contained within the mapping unit. The soil-unit is then used to access the other look-up tables containing the soil texture and other soil properties. Each soil-unit makes up a certain percentage of the mapping unit (Figure 12.5a). The main look-up table will be either component table 'FAO_World.dbf' or FAO_Africa.dbf', depending on which continent you are using. The FAO documentation breaks out African soils due to the many unique soil types that are found there. These tables contain the soil-units and percentages associated with each soil mapping unit. Specific soil-unit properties are found in 'FAO_Properties.dbf', FAO_Summ.dbf', or in kin_lut.dbf.\n\nThe properties table, FAO_Properties.dbf, lists the soil-units and properties (% sand, % silt, % clay, texture, bulk density, etc.) for the top and sub soils. FAO soil-units consist of a top-soil generally of 30 cm depth, and a sub-soil to 100cm depth. Texture is used to obtain hydraulic parameters, such as Ks, from the other look-up tables described below.\n\nThe summary table, FAO_Summ.dbf, is organized by soil-unit. It contains additional soil-units and soil properties not found in FAO_Properties.dbf, such as depth and rock fragments.\n\nThe kin_lut.dbf table from the AGWA database is used to obtain the required soil properties not found in the soils database. It consists of soil textures (i.e. sand, loam, clay loam) and their associated soil properties such as saturated hydraulic conductivity (Ks), mean capillary drive (G), and porosity (por).\n\nFAO soils are grouped into three broad soil texture categories: coarse, medium, and fine. Since the kin_lut.dbf uses textures from the soil texture triangle, all FAO soil-units in the tables were manually assigned one of these 12 texture classes based on the texture triangle. However, the FAO dataset contains some soil mapping units that do not have any associated soil-units or soil properties, so could not be assigned a texture. These mapping units are: \"dunes/shifting sands\", \"salt\", \"rock\", \"glaciers\", \"water\" and \"No Data\". Those units are treated as textures, are included in the kin_lut.dbf, and assigned parameter values based on the most similar soil texture in the table. For example, \"salt\" is given the same values as \"gypsum\", while \"rock\" has values from \"unweathered bedrock\". \"Dunes/shifting sands\" has values for \"sand\", \"glaciers\" and \"water\" use values for \"ice\" (all zeros), and \"No Data\" uses all zero values.\n\nOccasionally a soil-unit on the map is not found in the tables, so texture was determined based on the soil-unit name. FAO soil textures are \"coarse\", \"medium\" or \"fine\", and are designated with a \"1\" (coarse), \"2\" (medium), or \"3\" (fine) following the soil-unit symbol (i.e. AF 2). These textures are defined in the FAO documentation based on the soil textural classes from the USDA Soil texture triangle (FAO/UNESCO, 2003). These three soil textures (coarse, medium and fine) were added to the kin_lut.dbf, and their soil properties were created from weighted averages of values in the kin_lut.dbf. For example, \"coarse\" soil, defined as \"Sand, Loamy sand, and Sandy loam soils when clay is less than 18% and sand is greater than 65%\" (FAO/UNESCO, 2003), uses the weighted average of these three soil textures (see figure below). When retrieving parameters for use as inputs to the models, parameters were obtained first from the FAO data (FAO_World.dbf, and FAO_Africa. dbf) if available, then from the Reynolds data (FAO_Summ.dbf), and finally from the AGWA kin_lut.dbf table if there was no other source. KINEROS2 operates on the uppermost 9 inches of soil because of its dominant influence on event runoff. Since FAO soils consist of only a 30cm (11.8\") topsoil, and a subsoil to 100cm, only the topsoil properties are used. AGWA will get all the hydraulic parameters associated with each soil-unit in the mapping unit (SNUM), and weight them by percentage to get the average parameter set for each SNUM.\n\nAverage parameter sets for each SNUM are written to a table that is added to the project and named temp_kin_soil_lut.dbf. The final step in the soil weighting process involves using the intersection (soil and watershed) theme to determine the makeup of each watershed element. If more than one SNUM type intersects a watershed element (plane), then the percent presence of each SNUM in the element is used to derive an area-weighted average of the SNUM average values in temp_kin_soil_lut.dbf for each model element. These values are then written to the attribute table for the watershed theme.\n\nThe methodology for creating the input parameters for SWAT is very similar to KINEROS, except SWAT requires several additional parameters: awc (available water holding capacity), cbn (organic carbon), hydrologic soil group, number of soil layers, and soil depth. AWC is obtained directly from the Reynolds data (Reynolds et.al., 1999), and cbn is from the FAO data (FAO/UNESCO, 2003). Number of soil layers is set to \"1\" (top soil only), and soil depth is set to 100 cm (maximum soil depth).\n\nThe hydrologic soil group (HSG) is not given in the FAO documentation. It was determined using the soil texture classes, the USDA soil texture triangle, and the FAO documentation on soil texture classes (FAO/ UNESCO, 2003). General definitions for the hydrologic soils groups for use in verifying the relationship between texture and HSG were taken from Engel (Engel et al., 2004) and Jarrell and Bundy (Jarrell and Bundy, 2002).\n\nHydrologic parameters are derived for each land cover class using look-up tables with values derived from a combination of sources: Maidment (1993), Woolhiser et al. (1990), USDA-SCS (1986), and Rawls et al. (1982). Look-up tables for three pre-defined vegetation classification schemes are stored in the 'datafiles' directory: Values stored in the look-up tables include: CN, cover percent, interception depths, and Manning's roughness. SWAT requires CN and cover, whereas KINEROS requires cover, interception, and roughness (figure 12.5a). Versions prior to 1.32 used the same values, but they were embedded in the AGWA scripts, and could not be easily viewed or manipulated.\n\nOnly one value for any give parameter can be assigned to a model element, regardless of model, so the weighting procedure is the same for both KINEROS and SWAT. The land cover grid is intersected with the watershed polygons using the Spatial Analysis command TabulateAreas. This results in the creation of a temporary database file called tarea.dbf (which you never see in AGWA unless you get an error). Within this file we can get the percentage makeup of each land cover class in each watershed element. This percentage is used to weight values for the relevant hydrologic parameters taken from the land cover look-up table.\n\nFigure 12.7a. The look-up table for the NALC land cover classification scheme.\n\nAny land cover classification scheme can be used with AGWA if the user supplies a properly formatted look-up table, such as the one shown in figure 12.5a. To develop a user-defined land cover look-up table we recommend that you start with the LC_lookup.xls Excel workbook provided in the 'datafiles' directory. There are instructions in the 'Notes' worksheet of this workbook. To use a user-defined land cover look-up table, load the table into the project and select it in the 'Soils and Land Cover Info' below the 'Default' and 'Custom' radio buttons.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (32 of 66)11/5/2004 1:16:35 PM\n\nThe remaining steps required to complete a KINEROS simulation through the AGWA interface include:\n\n1. Writing the precipitation input file for the model run 2. Writing the input parameter file and running KINEROS 3. Viewing results, or the difference between results 4. Rerunning existing simulations (optional)\n\nAGWA can create uniform, single-gage precipitation input files for KINEROS, but not multiple gage input files. If data from multiple gages are available, KINEROS does have the ability to interpolate rainfall depths/intensities across the watershed, but the coding and user preparation necessary to synchronize gage time with event time for writing multiple-gage input files make this option impractical for implementation in AGWA. We have, however, provided a Perl script in the 'datafiles' directory that can help with this if very specific input data format requirements are met. The script is called convert.pl, and formatting requirements are contained within it. Methodologies for implementing radar data as an option for building KINEROS rainfall files in AGWA are currently being investigated.\n\nAfter selecting 'Write KINEROS Precipitation File' from the AGWA tools menu, the 'KINEROS Precipitation' window pops up and offers three methods that can be used to generate uniform precipitation (design storm) input files. As shown in the figure, these include: Precipitation Frequency Maps, the AGWA design storm database, and manually-entered design storms.\n\nAll three methodologies require the specification of a relative soil saturation value for the onset of the storm. This is equivalent to the KINEROS SA parameter and can vary between 0.14 and 0.93. See http://www.tucson.ars.ag.gov/kineros/ for more information.\n\nNOAA PFDS -Precipitation-frequency maps may be downloaded via NOAA's Precipitation Frequency Data Server (PFDS) (http://hdsc.nws.noaa.gov/  hdsc/pfds/) for the Western states and Ohio River Basin. For those states not covered by the NOAA dataset, we have developed a temporary alternative by digitizing NOAA TP 40 rainfall frequency atlas maps and interpolating to a grid. These data are available for download at http://www.  tucson.ars.ag.gov/agwa/rainfall_frequency.html until such time that the PFDS is complete. Multiple durations and frequencies are available, but users should note that durations exceeding 48 hours are not applicable in KINEROS. Releases prior to AGWA 1.4 also supported precipitation frequency maps, but in different units. AGWA 1.4 supports grids with units of 1000ths of inches, whereas prior releases supported grids with units of 100,000ths of inches. If grids measured in 100,000ths of inches are all that is available, a simple grid calculation will make the grids compatible with AGWA 1.4.\n\n• Instructions for downloading and importing grids from the NOAA Precipitation Frequency Data Server 1. Go to http://hdsc.nws.noaa.gov/hdsc/pfds/ in your web browser.\n\n2. Click on the desired state on the map. 3. Click on the 'GRIDS' button in the top right quadrant of the page. 4. On the new page scroll down until you see the first set of comboboxes. The appropriate region should already be selected for the 'Region'. Select the desired return period and duration of the storm. Choose ArcInfo ASCII Grid for the 'Format', and Mean for the 'Type'. 5. When the appropriate selections are made in step 4, click the 'Click here to begin GIS data download' and save the grid to your hard drive.. 6. Once the file is downloaded, it will need to be converted from an ASCII file into an actual grid. This can be accomplished two ways, via the 'Import Data Source...' option in ArcView or via the ArcInfo command line. a. In ArcView, the grid can be imported using the 'Import Data Source...' feature. Access this feature via the File menu when a view is active. This will open the dialog that allows you to choose the type of file to import. Select ASCII Raster and browse to the location of the ascii grid. b. In ArcInfo, to convert the ASCII grid to an ArcView grid, the ASCIIGRID command is used. Refer to the Arc documentation for more information on this command. Change your workspace to the desired output location, type asciigrid followed by the full pathname of the file and press 'Enter'. 7. The grid is downloaded in geographic coordinates Decimal Degrees. It must be projected to match the rest of your project data. ArcInfo, ArcToolbox, or the 'Reproject Grids' grids extension, available at http://arcscripts.esri.com/details.asp?dbid=11368, are all suitable grid projecting solutions. 8. Add the grid to the project via the 'Add Grid' radio button and select the grid from the 'Precipitation-Frequency Grids' combobox.\n\n• Instructions for downloading and importing grids from the USDA-ARS server 1. Go to http://www.tucson.ars.ag.gov/agwa/rainfall_frequency.html in your web browser. 2. Select the desired state from the 'Location' combobox, followed by the desired return period and duration of the storm.\n\n3. Click the download button and save the grid to your hard drive. 4. The grid is downloaded as an ArcView grid and does not need to be converted from an ASCII grid like the PFDS grids. 5. The grid is downloaded in geographic coordinates Decimal Degrees. It must be projected to match the rest of your project data. ArcInfo, ArcToolbox, or the 'Reproject Grids' grids extension, available at http://arcscripts.esri.com/details.asp?dbid=11368, are all suitable grid projecting solutions. 6. Add the grid to the project via the 'Add Grid' radio button and select the grid from the 'Precipitation-Frequency Grids' combobox.\n\nOnce the desired grid has been downloaded, added, and selected from the 'Precipitation-Frequency Grids' combobox, the watershed to which the precipitation will be applied must be selected. Before proceeding, the Saturation Index should be set. The Saturation Index is the relative soil saturation value for the onset of the storm. It is equivalent to the KINEROS SA parameter.\n\nAGWA takes the watershed centroid and punches it through the NOAA grid to get the storm total depth value. The depth value is converted to a file:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (34 of 66)11/5/2004 1:16:35 PM hyetograph using the SCS methodology (SCS, 1973) and a type II distribution. The type II distribution and several others are shown in the figure below. The type II distribution is appropriate for deriving the time distribution of rainfall for most of the country, as shown in the map below (SCS, 1986).\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (35 of 66)11/5/2004 1:16:35 PM A growing database of return period storms called dsgnstrm.dbf (shown below) is available in the 'datafiles' directory provided with AGWA. Return period depths are available only for select locations for which we have been able to find data, and the range of available return periods and durations varies as a result. The location and frequency/duration are selected in the window shown to the right. Again, as with the precipitation frequency maps, the SCS methodology and a type II distribution are used to convert the return period depths to hyetographs.\n\nThe AGWA Database can be edited by the user to add data for additional locations, return periods, and/or durations. Simply open the table and select 'Start Editing' from the 'Table' menu. To add a new record (row), select 'Add Record' from the 'Edit' menu. To modify an existing value, click on the 'Edit' button on the lower half of the toolbar and then click on the cell that you want to change. If you have return period depths for your area and think that other AGWA users might benefit from them, please e-mail them to us at agwa@tucson.ars.ag.gov. **At this writing only the San Pedro data can be reduced as a function of watershed size. For these data the reduction factor is computed using the Osborn et al. (1980) method for thunderstorms in the southwestern United States. This functionality is presently embedded directly in the script ws. dsgnstrm2.generate, and can be easily modified to allow for other methods if we are made aware of them (write to agwa@tucson.ars.ag.gov).\n\nIf a design storm database file does not exist but there are only one or two design storm data sets that must be run, then that data can be entered manually through the 'User-Defined (Design) Storm' dialog (shown on the right). This dialog is generally divided into two parts: file information, and data. File information includes an (optional) text header with information about the precipitation event you are writing to the file, the watershed (soil) saturation index (see KINEROS2 documentation for more information), the units for your data, and the number of time-depth/intensity pairs that you would like to enter. Don't forget that the first \"Time\" must be 0, and the last \"Time\" must be equal to the duration of the design storm.\n\nOnce the file information is complete and the 'Proceed' button is clicked the list box for data entry in the lower portion of the dialog becomes active with the appropriate number of rows. There will only be three columns, the first is the record number (do not change these values), the second is the time (minutes), and the third is the depth/ intensity (mm or mm/hr). To enter values either double click the appropriate cell or highlight it and then hit 'Enter' on the keyboard. This will pop up a window into which the value may be typed. Hit 'Enter' or click okay when the value is entered. When the data entry is complete click the 'Write to .pre file' button at the bottom to generate the input precipitation file for KINEROS.\n\nSingle Return Period Depth -Similar to the User-Defined Storms above, the single return period depth dialog can be used to create your own storms. As with the Design Storm above, there is an (optional) text header with information about the precipitation event you are writing to the file, along with a storm depth, duration, and watershed (soil) saturation index. The storm depth is converted to a hyetograph using the SCS methodology with a type II distribution, as with the precipitation frequency maps. If you have designated the system environmental variable 'AGWA', then you will not be prompted to locate the KINEROS executable. Otherwise, if KINEROS has not been run since ArcView was opened you will be prompted to point out its location to AGWA -this step will not be required again until the next time you exit and restart ArcView. You will then be prompted to select the watershed theme and select name and location for the KINEROS input parameter (*.par) file. The KINEROS output (*.out) file will automatically be given the same name and written to the same location as the parameter file. AGWA will then ask for a specific precipitation (*.pre) file to be used in the model run. Once this is selected AGWA will open an MS-DOS window and run KINEROS. When the run is complete AGWA will retrieve the results from the KINEROS output file and import them into ArcView in the form of 2 database files: pxxxx.out and cxxxx.out. The 'xxxx' in these file names represents the 4 character basin identifier entered previously. The 'p' indicates to AGWA that the results are for planar watershed elements, and the 'c' indicates that the results are for stream channels. Both of these files will be visible in the 'Tables' module of ArcView.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (38 of 66)11/5/2004 1:16:35 PM To view the KINEROS results, select 'View KINEROS Results' from the AGWA Tools menu. This brings up the 'Select Results' window, which provides the functionality to view results in two different ways: individually, or as the difference between two simulations.\n\nTo view results from a single model run select the watershed in the 'Select Results' window. Once a watershed is selected the simulation combobox will become active and you can select from the simulation(s) that have been run for that watershed. When a simulation has been selected the 'Description' button becomes active and can provide a reminder of the specific data used in that simulation -this can be particularly valuable if multiple simulations have been run. The final step in viewing the results of a simulation involves selecting the output parameter that you wish to be displayed in the View. There are nine choices representing averages over the simulation: infiltration (mm), infiltration (in), runoff (mm), runoff (m 3 ), sediment yield (kg/ha), peakflow (m 3 /s), peakflow (mm/hr), peak sediment discharge (kg/s), and channel scour/deposition (mm/m 2 ). When one of the output parameters is selected click the 'Update' button; the watershed and stream coverages will be updated in the View and Legend with the new parameter and a pre-defined color scheme. Viewing results from an individual plane or channel can be accomplished by selecting the appropriate theme in the Legend, selecting the 'Identify' button on the toolbar, and then clicking on the desired feature.\n\nTo view results as a difference between two simulations on the same watershed, for instance when two different land cover or precipitation files have been used, click the 'Difference' button once the watershed has been selected. This brings up the 'Calculate Difference' window, which enables the user to select the two simulations, compute the difference between them, and save this output as a new simulation result that can be viewed in the same manner described previously. The user is given the opportunity to report the difference between the two simulations in terms of the percent change or the absolute change, and the formula used in the calculation is shown at the bottom of the window. The calculated difference is written to two new database files (one for the planes and one for the channels, as described above) with the name entered at the top of the 'Calculate Difference' window. For example, if the calculated difference is to be called 'Output', then pOutput.res and cOutput.res will be created and added to the project tables.\n\nAfter clicking OK at the bottom of the Calculate Difference window, the name you selected for your output will show up as a simulation result in the Select Results window that can be selected and viewed just as any other.\n\nTo rerun an existing KINEROS simulation, select 'Rerun Existing Simulation' from the KINEROS section of the AGWA Tools menu. This brings up the 'Rerun Simulations' window where you select the watershed that contains the simulation to rerun. With the watershed selected, the watershed 'Description' button and 'Simulations' combobox are enabled, allowing you to view a description of the selected watershed and to select a simulation to rerun. Once a simulation to rerun is selected, the simulation 'Description' button and 'Rerun' button are enabled, allowing you to view the simulation description and initiate the rerun. After clicking 'Rerun' you are presented with message box informing you what the original precipitation file was. At this point, you may choose to use the original precipitation file or select another through the 'Select Precipitation Input File:' dialog. Once a file is selected and 'OK' is clicked, the KINEROS simulation is rerun.\n\nThe rerunning of simulations is provided to enhance the functionality of KINEROS in AGWA. It gives users the ability to modify the parameter file for KINEROS outside of AGWA while maintaining the ability to import the results back into AGWA for visual analysis and comparison. The original simulation results are maintained so that results between the original and rerun can be compared. AGWA relies on the user's ability to edit the input files correctly and assumes that if the files necessary to run the simulation are in place, then they have the correct formatting required by KINEROS. AGWA requires an unweighted precipitation file for both uniform and distributed rainfall. At this writing, both methods require that the user create an unweighted precipitation database file (example shown on the right) consisting of a minimum of three fields: year, day, and gage precipitation. The year field must contain a 4-digit year in every record. The day field represents day of year (1-366), and should repeat for each year in the file (no missing days). The gage field(s) contain average daily precipitation in millimeters for the gage listed in the field header row. Missing data can be accommodated through a weighting scheme described in the distributed rainfall section. Any negative precipitation depths are interpreted to represent missing data (no data). ** Note that the gage field names MUST have two important attributes:\n\n• Gage field names must always begin with 'G' so that AGWA can recognize them as gages.\n\nThe gage ID must follow the letter 'G', and this ID must correspond with the gage ID in the rain gage point theme in your project. If this is not the case AGWA will be unable to find the appropriate gage.\n\nNo limit has been placed on the number of gages that may be included in the unweighted precipitation file, but beware that the more gages it contains the longer it will take to generate the distributed precipitation input files for SWAT. Additionally, the time it takes to generate the precipitation input file is also linked to the length of the time record, so it is advised that unnecessary data is removed.\n\nRegardless of whether a uniform or distributed rainfall file is generated, AGWA creates and maintains a record of each unique combination of watershed configuration and precipitation file. These are stored in a secondary table called swatpptfiles.dbf, which is added to the list of tables in the project and stored in the rainfall directory. For each unique combination, the location of the precipitation file and its start and end dates are written to the swatpptfiles.dbf file. This enables AGWA to ensure that the user does not accidentally use the wrong precipitation file for a given watershed configuration, or enter incorrect dates for a simulation. It also, however, requires that the locations where precipitation files are stored do not change once they have been created, so take care to ensure they are written to the correct directory.\n\nIf the rain gage point theme has less than three gages (points, or records) or if less than three gages were selected in the 'Rain Gage Stations' dialog, then you will automatically be routed to the 'SWAT Uniform Precipitation' dialog below. The first information required in this window is the rain gage ID field from the point theme, unless it was previously selected in the 'Rain Gage Stations' dialog. Next, the unweighted precipitation file must be entered. When 'Accept' is clicked after these first two tasks AGWA checks to make sure that at least one gage from the point theme corresponds to a gage in the unweighted precipitation file. If no gages are found in common, the user is informed of such and progress is stopped. Next, the SWAT watershed element theme must be selected so that AGWA can compute which gage is closest to the centroid of the watershed, in case two gages are available. Finally, the user must enter a name for the SWAT precipitation file that will be generated. When the 'Write' button is clicked the *.pcp file will be written to the 'rainfall' subdirectory of the project directory. At the completion of the precipitation file creation, the option to use elevation bands is presented (see below). **Missing data values in the unweighted precipitation file provided by the user (again interpreted to be any negative precipitation depths) are automatically converted to zero depth when the SWAT *.pcp file is written.\n\nIf three or more gages exist in the rain gage point theme and are selected in the 'Rain Gage Stations' dialog, then you are automatically routed to the distributed rainfall dialog, 'SWAT Distributed Precipitation'. Three tasks are required to generate a distributed rainfall file:\n\n1. Creating a Thiessen polygon theme from the rain gage point theme (completed in the bottom section), 2. Intersecting the Thiessen polygon theme with the watershed configuration (completed in the middle section), 3. Computing the weighted precipitation depth for each subwatershed and writing it to the SWAT precipitation file (completed in the top section).\n\nThe 'SWAT Distributed Precipitation' dialog is organized according to these same three tasks and only as much of the dialog as necessary will be visible to the user. In the event that one of the first two tasks has already been completed during an earlier model run, one or both of the first two may be skipped by selecting the completed intersection theme or Thiessen Polygon theme from the upper and middle sections of the dialog, respectively.\n\nDuring the creation of the Thiessen polygon theme, AGWA checks to make sure that polygons are not created for gages in the rain gage point theme for which no data exist in the unweighted precipitation file supplied by the user. If a discrepancy is found and there are more gages in the point theme than the database file, then AGWA will pop up a 'Gage Name Error' window (below) to inform the user which gages will and will not be used.\n\nAdditionally, if a previous Thiessen Polygon theme or Thiessen/watershed intersection theme is used, the user must choose the field name containing the gage IDs from the theme attribute table before proceeding. If the wrong field is inadvertently selected, a message is displayed informing the user no gages common to the Thiessen/intersection theme and the unweighted precipitation file were found. Once the user hits the first 'Generate' button and commits to the time consuming process, a dialog informing the user of the status of the weighting is displayed(see right). At the completion of the precipitation file creation, the option to use elevation bands is presented (see below).\n\nGenerating distributed input precipitation files for SWAT is the most time consuming process in the course of using AGWA to conduct a watershed assessment. The length of time this will take increases with the number of gages, the length of the precipitation record, and the complexity of the watershed configuration. Be patient and avoid killing a run because you think it is taking too long. For comparison, with eight gages, 14 years of record, and 30-40 subwatersheds it took us 1-2 hours to generate the weighted precipitation file. We found that a defragmented hard drive significantly reduces the time required to complete this process.\n\nThe weighting scheme used to assign weighted precipitation depths to each subwatershed in a SWAT input file is rather elaborate to account for the frequent occurrence of missing (no data) data values. The weighting scheme outline below is applied on a daily basis and relies on the following notation: WD = weighted depth for a subwatershed; GD = gage depth; GW = gage weight, or weighted influence of a gage on the computed WD for a subwatershed; BW = bad weight, the sum of all the GWs for a subwatershed where GD < 0 (missing data).\n\n• If all the gages have data then WD = WD + (GD*GW)\n\n• If all the gages for a day have either zero values or no data then WD = 0 for all watershed elements. In the situation where all the gages are missing data for a day an error log file entitled 'ppt_error.txt' is written to the same directory as the *.pcp file, and updated for each day that this occurs.\n\nThe elevation bands feature appears after writing of the precipitation file is complete, for both uniform and distributed weighting. SWAT elevation bands adjust precipitation and/or temperature to account for orographic effects. Elevation and location data from the rain gage theme is written to the precipitation file and is used along with the mean elevation of the bands for a subwatershed to adjust the precipitation and temperature for that subwatershed. If the elevation of a rain gage is not included in the point theme attribute table, the DEM used to delineate the watershed is used to determine the elevation of that particular gage.\n\nSWAT limits the number of elevation bands that can be defined for each basin to 10. To work with this limitation, the AGWA process adjusts the elevation interval for the entire watershed so that no one subwatershed exceeds 10 bands. The user may input any value for interval , but that interval will not be used for the final band outputs if it results in more than 10 bands in any subwatershed. When the number of bands for any subwatershed exceeds 10, the interval value is increased by the adjustment interval and the new bands are generated. This process is repeated until AGWA reaches an interval that satisfies the 10 band limit.\n\nOnce the final interval is set, AGWA generates the .ele data files. These are placed in the 'elev' directory in the user's AGWA rainfall folder; if the directory does not exist, it is created. A file is created for each subwatershed (watershed name + subwatershed id + .ele) and includes the following: These files are used to write the subbasin general input files (.sub) when the user opts to run SWAT. When the elevation band checkbox is selected, AGWA searches the 'elev' directory for .ele files with the watershed name; if no files exist, the user can choose to continue the simulation without. The .ele file is read and the data is added to the .sub files where necessary.\n\nWhen the 'Continue' button is clicked at the end of the 'SWAT Input Parameters' dialog, a status window will open that informs the user which tasks are being performed. The status window will remain open in the background while all of the various tasks are being performed, and until the model run is complete. While SWAT is actually running, an MS-DOS window will open and display the year of the simulation as it is computed. When SWAT is finished, this window will close and AGWA will automatically intitiate the transfer of model results into ArcView in the form of 2 database files: pxxxxx.res and cxxxxx.res. The 'xxxxx' in these file names represents the 5-character simulation name entered previously. The 'p' indicates to AGWA that the results are for planar watershed elements, and the 'c' indicates that the results are for stream channels.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (46 of 66)11/5/2004 1:16:35 PM\n\nTo view the SWAT results, select 'View SWAT Results' from the AGWA Tools menu. This brings up the 'Select Results' window, which provides the functionality to view results in two different ways: individually, or as the difference between two simulations.\n\nTo view results from a single model run select the watershed in the 'Select Results' window. Once a watershed is selected the simulation combobox will become active and you can select from the simulation(s) that have been run for that watershed. When a simulation has been selected the 'Description' button becomes active and can provide a reminder of the specific data used in that simulation -this can be particularly valuable if multiple simulations have been run. The final step in viewing the results of a simulation involves selecting the output parameter that you wish to be displayed in the View. There are eight choices representing yearly averages unless otherwise noted: Precipitation (mm), ET (mm), Percolation (mm), Surface Runoff (mm), Transmission Loss (mm), Water Yield (mm), Sediment Yield (t/ha), and Channel Discharge (m 3 /day). Some of these choices are not available for both subwatersheds and stream channels. When one of the output parameters is selected click the 'Update' button; the watershed and stream coverages will be updated in the View and Legend with the new parameter and a pre-defined color scheme. Viewing results from an individual plane or channel can be accomplished by selecting the appropriate theme in the Legend, selecting the 'Identity' button on the toolbar, and then clicking on the desired feature.\n\nTo view results as a difference between two simulations, for instance when two different land cover or precipitation files have been used, click the 'Difference' button once the watershed has been selected. This brings up the 'Calculate Difference' window, which enables the user to select the two simulations, compute the difference between them, and save this output as a new simulation result that can be viewed in the same manner described previously. The user is given the opportunity to report the difference between the two simulations in terms of the percent change or the absolute change, and the formula used in the calculation is shown at the bottom of the window. The calculated difference is written to two new database files (one for the planes and one for the channels, as described above) with the name entered at the top of the 'Calculate Difference' window. For example, if the calculated difference is to be called 'Output', then pOutput.res and cOutput.res will be created and added to the project tables.\n\nAfter clicking OK at the bottom of the Calculate Difference window, the name you selected for your output will show up as a simulation result in the Select Results window that can be selected and viewed just as any other.\n\nTo rerun an existing SWAT simulation, select 'Rerun Existing Simulation' from the SWAT section of the AGWA Tools menu. This brings up the 'Rerun Simulations' window where you select the watershed that contains the simulation to rerun. With the watershed selected, the watershed 'Description' button and 'Simulations' combobox are enabled, allowing you to view a description of the selected watershed and to select a simulation to rerun. Once a simulation to rerun is selected, the simulation 'Description' and 'Rerun' buttons are enabled, allowing you to view the simulation description and initiate the rerun.\n\nThe rerunning of simulations is provided to enhance the functionality of SWAT in AGWA. It gives users the ability to modify the input files for SWAT outside of AGWA while maintaining the ability to import the results back into AGWA for visual analysis and comparison. The original simulation results are maintained so that results between the original and rerun simulation can be compared. AGWA relies on the user's ability to edit the input files correctly and assumes that if the files necessary to run the simulation are in place, then they have the correct formatting required by SWAT.\n\nThe 'Advanced Options' dialog, accessed through the 'Advanced Options' item on the AGWA tools menu, gives the user access to additional options for AGWA. The options are enhancements to AGWA that are not necessary for standard model calibrations and runs. Specific information and help for each component of the dialog can be accessed through their corresponding sections of the manual.\n\n• Land-Cover Modification Tool • Hydraulic Geometry Relationships • Other 15.1 Land-Cover Modification Tool\n\nThe Land-Cover Modification (Land Mod) tool was originally designed to be used with the AGWA tool as an extension for the ESRI ArcView GIS software. With the current release of AGWA, however, it was decided to incorporate the Land Mod tool into the AGWA extension itself. The Land Mod tool allows the user to modify a land cover map, and then run AGWA to determine the hydrologic effects of the land cover change. Land Mod is accessed through the 'Advanced Options' item on the 'AGWA Tools' menu. Run Tool\n\nWhen this option is selected the user is presented with the following screen: 4. Apply a random land cover pattern to a polygon map When this option is selected the user is presented with the following screen:\n\nThe Hydraulic Geometry Relationships section of the 'Advanced Dialog' provides the user with a couple of time saving steps.\n\nThe user has the ability to set default geometry. This is designed so that AGWA requires less interaction from the user through the delineation and discretization process. Setting a default geometry here causes AGWA to set the default geometry for any new watershed discretization to the geometry selected here without further user input. This simple option saves the user a little time if all watershed discretizations in the project will be using the same hydraulic geometry relationship. The default geometry may be removed by clicking on 'Set Default Geometry' and then clicking cancel on the next dialog. This will set the default geometry to nil and AGWA will begin prompting you again for the hydraulic geometry relationship in the watershed discretization process.\n\nThe user can rewrite geometries for watersheds already discretized. This is a useful time saving feature that allows users to change and compare channel geometries without discretizing a new watershed. AGWA does not use the channel geometries until the input files for SWAT or KINEROS are written. Rewriting the geometry here changes the channel widths and depths (according to the relationship chosen) in the stream attribute table. The stream attribute table is then queried for each channels widths and depths during the writing of the input files.\n\nThis section of the 'Advanced Options' dialog provides the user the ability to use baseflow in KINEROS and to turn on or off info messages and tips for KINEROS and SWAT.\n\nBaseflow -Baseflow in KINEROS is an option for advanced users. To use baseflow, first you must have the 'Use Baseflow' checkbox checked in the 'Advanced Options' dialog. Then, the user must edit the stream attribute table of the watershed in which they wish to use baseflow. The stream attribute table and baseflow field, Qbase, can be seen below. AGWA, by default, writes '-999.00' to all records in the stream attribute table during the watershed discretization process. This is to prevent users from inadvertently using baseflow in KINEROS.\n\nWith the 'Use Baseflow' checkbox checked and all the records in the stream attribute table set to '-999.00', baseflow will not be used. To enable baseflow for a particular channel, the channel's record must be edited to have a non negative value AND the checkbox must be checked. Three different ranges in the Qbase field are of interest. They are • Values < 0 ❍ Baseflow is not written to the KINEROS parameter file for the current channel, infiltration is active in this channel.\n\n• Values = 0 ❍ Baseflow is written to the KINEROS parameter file with a value of 0 for the current channel, resulting in no infiltration in this channel, even though there is no contributing baseflow.\n\n• Values > 0 ❍ Baseflow is written to the KINEROS parameter file with the values in the stream attribute table for the current channel, resulting in no infiltration in this channel and a flow (m 3 /s) equal to the value in the stream attribute table being added to this channel. **Note that each record in the stream attribute table corresponds to an individual channel in the KINEROS parameter file. The entire reach is composed of all the channels in the stream attribute table, so a reach may have gaining (Qbase >= 0) and losing channels (Qbase < 0) if positive and negative values appear in the Qbase field for different records.\n\nKINEROS applies an interpolation routine to the baseflow values. KINEROS keeps track of baseflow at the upper end of a channel, and linearly interpolates the baseflow down the channel by looking at the value of baseflow at the next downstream channel. If no baseflow (a negative value in the attribute table) is detected in the next downstream channel, baseflow is not interpolated and goes from the value in the upstream channel to zero abruptly. To avoid this, set the baseflow in the downstream channel to zero so the interpolation routine remains active, though infiltration routines will not.\n\nFor more information on baseflow in KINEROS refer to the KINEROS website and documentation at http://www.tucson.ars.ag.gov/kineros/.\n\nInfo Messages -These checkboxes appear so that users may turn off warnings and informational messages regarding the data being used as it pertains to the model being run. When checked, warnings may appear (but will not prevent the use of AGWA) if the user is attempting to apply SWAT or KINEROS with data that is not suitable for the models. Examples of this include but are not limited to: DEMs with a resolution too coarse to apply the models accurately; low slope warnings for channels and planes with KINEROS; using soil maps for the land cover and soils parameterization that do not completely contain the watershed being parameterized; or applying KINEROS to a watershed greater than 100 km 2 .\n\nTemporary files are generated during the watershed discretization and land cover and soils parameterization. These files accumulate rapidly if AGWA is used frequently, and use an unacceptable amount of disk space, in addition to cluttering your workspace. Unfortunately, due to limitations associated with ArcView it is not possible to remove these files as they are created (the project maintains pointers to these files and produces an unlink error if they are deleted from within ArcView), and it has instead been necessary to come up with a creative alternative. Our solution has been to clean up the working directory ('\\av_cwd') when the project is closed through the AGWA extension's uninstall script.\n\nThe temporary files include:\n\n• intsec#.shp, .shx, and .dbf -the ArcView files for a temporary intersection theme generated during the land cover and soils parameterization.\n\n• delta#.shp, .shx, and .dbf -the ArcView files for a temporary theme generated during the watershed discretization.\n\n• tarea#.dbf -a temporary database file generated as a byproduct of the Spatial Analyst 'Tabulate Areas' command issued during the land cover and soils parameterization.\n\nwhere the # represents a number appended sequentially by ArcView as the files are created. It does not matter how many of these files are in your working directory; all of the temporary files will be removed regardless of the number.\n\nAGWA does not contain an integrated help system. However, context-sensitive help is available by using the 'Help' buttons placed throughout the AGWA dialogs. Additionally, we have compiled a list of helpful tips and tricks and a list of more common errors that may occur; these lists can be referenced to help correct some common errors. ArcView-specific help is available through the help menu.\n\nIn many situations a watershed will lie on two or more DEMs, which must be mosaiced together before the watershed can be delineated. An ArcView extension called Grid Utilities, written by Min-Lang Huang huang@dprc.ncku.edu.tw, provides the functionality to mosaic DEMs in this situation. The extension, grid01.avx, and a Grid Utilities v1.1 User Guide.pdf are available for download from the AGWA website, http://www.tucson.ars.ag.  gov/agwa/, in the Downloads section. An example problem is also available at the AGWA website that provides step-by-step instructions on how to do this.\n\nClipping your DEM and land cover grids to a small buffer around the watershed will reduce processing time for the watershed delineation and land cover parameterization, respectively. The XTools extension, written by Mike DeLaune, Oregon Department of Forestry, provides the capability to buffer and clip grids. It is available for download from the AGWA website, http://www.tucson.ars.ag.gov/agwa/, in the Downloads section.. More information about XTools can be found at: http://www.odf.state.or.us/divisions/management/State_forests/XTools.asp ❍ Flow direction and flow accumulation grids generated from a DEM can be used more than once. Avoid generating these multiple times for the same area to minimize the space that will be used on your hard drive.\n\nNo spaces -ArcView has problems reading directory and file names with spaces in them. We have attempted to prevent you from using spaces in file and directory names entered through AGWA, but user-generated files that are added to the project can still cause problems.\n\nMinimize name length -In general, longer file names are less efficient than shorter ones. In certain situations throughout AGWA there are specific maximum file name lengths, and you will be notified if you enter a name that is too long. Beware, however, that we may not have caught all of these, and consider that there can be name length restrictions if you are having difficulty with a particular file.\n\nReserved names -several file names have been designated for temporary files created by AGWA as well as those used and users should NOT use them. They include: tarea (any file type), delta (any file type), intsec (any file type), dsgnstrm.dbf, kin_lut.dbf, swatpptfiles.dbf, and wgnfiles.dbf\n\n❍ Grids and coverages -Do NOT move grids or coverages using Windows Explorer unless you copy the entire directory in which they reside. If an individual grid or coverage must be moved from one directory to another, use the 'Manage Data Sources...' option under the 'File' menu when a view is active. Also use this option if you must delete a grid from your hard drive. ❍ Shapefiles -A shapefile actually consists of five files: .shx, .shp, .sbn, .sbx, and .dbf. If necessary these can be copied or deleted using Windows Explorer, but be sure to copy/delete/move all of them together.\n\n• SWAT Input Files -The input precipitation file for SWAT (*.pcp) contains the average latitude, longitude, and elevation of the watershed. The average elevation value is derived from the DEM, and precipitation values are adjusted for elevation in subbasins where elevation bands are defined. The latitude and longitude values, however, are simply for your records, and are not used by the model. Due to the difficulty of converting UTM data into Lat/Long coordinates we have used fixed values in the precipitation file that do NOT reflect the watershed you have selected.\n\n• Data Projections -One of the problems with downloading data from various sources is that the data are not always in common projections. The NLCD data, for example, come in either \"Interrupted Goode Homolosine\" or \"Lambert Azimuthal Equal Area\" projections, while the STATSGO data are projected in \"Albers Equal Area\" and USGS data are mostly in \"UTM\". AGWA presumes that the user has working knowledge with projecting data, but it is crucial that the GIS data share common projections before geospatial assessments are made. Please consult the ArcView Help menu if you are not sure how to declare/transform the projection of a data theme.\n\n• Very Small Watersheds -Very small watersheds are difficult to delineate in AGWA because of the minimum value that is set for the CSA (20 acres or 8.1 hectares), and a relatively large threshold used in creating the stream2500 grid. To get around these problems you will need to do the following: ❍ 1a. From the project window select 'Scripts' and click 'New'. Next, from the 'Script' menu select 'Load system script', and then select the script 'ws. dialog.wd2.contPanel.contArea.accept' and click 'OK'.  **Note that we have set a minimum CSA value because using areas smaller than 20 acres creates the potential for errors to arise during the land cover and soils parameterization -see error message I in the Error Messages section. Also, bear in mind that using a small CSA value on a large watershed will result in a very large number of planes and channels, and other problems may arise.\n\n• No Data In Results -In certain rare situations for specific CSA values there can be a problem with the watershed discretization that results in KINEROS not running to completion. This happens because of an error in the watershed discretization process that occurs when a stream channel forks just below two adjacent upland elements. It can be avoided be changing your CSA value up or down slightly until the problem goes away. Efforts are currently under way to trap and rectify this problem during the discretization process and before KINEROS is run, so watch for updates soon.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (55 of 66)11/5/2004 1:16:35 PM Despite our best effort to trap likely errors, the determined/frequent user will still undoubtedly get error messages on occasion. Some of the more common of these are described below along with suggested solutions.\n\nIn the case where the CSA is quite small and the land cover grid has a relatively large resolution, AGWA cannot accurately determine the average land cover properties of the watershed elements. In this case, the user has two options to get around the error:\n\nOption 1: Re-run the watershed delineation routine, this time with a larger CSA so that none of the individual planes is smaller than the cell resolution.\n\nOption 2: Resample the land cover grid so that the resolution is less than the original data set. Note: resampling the grid to reduce the cell size does not affect the AGWA algorithms that are used to define watershed characteristics; nor does it \"improve\" the land cover data, and users are advised to use the original data in all subsequent GIS operations.\n\nTo proceed with option 2, the user has several methods at his/her disposal. If the \"Grid Utilities v1.1\" extension has been loaded, the grid can be resampled by: 1.\n\nclicking on the table of contents of the grid you wish to resample 2. clicking on \"grid. change cell size\", as shown here:\n\n3. set the new cell size to a lower resolution than the original grid An alternative approach is to use the native ArcView / Spatial Analyst functions. To do so, first set the Analysis Properties of the View such that the resolution is lower than the original grid. For example, if the original grid had a resolution of 60m, the user could select a resolution of 30m, as shown here. Next, use the Map Calculator to create a new grid based on the old one:\n\nAt this point, a new grid with a smaller resolution will have been created. Use this grid in subsequent land cover parameterizations.\n\nNote: if the new name of the grid is overly long or contains spaces, re-name it.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (57 of 66)11/5/2004 1:16:35 PM This error should have been fixed by our modifications to extension uninstall scripts, but may still cause problems. The error occurs when AGWA does not complete the land cover and soils parameterization. In this case, files are orphaned on the hard drive but still connected to the ArcView project. If the error appears you should save the project and try again. If this is unsuccessful these files must be cleaned up by the user before AGWA will proceed.\n\nThis is the hardest of the AGWA errors to spot immediately. The user is usually unaware that something has gone wrong until either the SWAT or KINEROS model has been run (and failed). This normally happens when the channel network is quite linear or the topography is relatively flat. In this case, AGWA fails to determine the correct routing structure and does not subdivide the watershed into the appropriate watershed elements, as shown here. Note that in this picture the watershed has been re-drawn with the legend type of \"Unique Value\" and the \"Value Field\" set to \"WS #\" so that it shows the watershed planes as unique colors. In this case the planes are not subdivided properly.\n\nTo fix this problem, the user must go back and reselect a new, slightly larger or smaller CSA. The problem arises based on the intersection of channels, and changing the CSA will alter the routing structure, hopefully resulting in a proper subdivision of the watershed. In the picture shown above, the CSA was enlarged to 25 acres and the watershed subdivision was successful . file:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (58 of 66)11/5/2004 1:16:35 PM\n\nUnder certain circumstances the planes will be numbered incorrectly, and this will result in the sand, silt, and clay fractions not summing to 1 (+ 0.03). This will cause problems when attempting to run KINEROS, even though it does not complain. Although we believe we have isolated and corrected this problem, we have left the error trapping in place to warn users that a problem exists before any time is spent manipulating and running a particular watershed.\n\nWhen using internal gages in the watershed discretization, having gages in close proximity to one another is a known cause of problems with the watershed discretization. In addition, having gages in close proximity to channel junctions causes problems with the discretization. Both of these situations cause very small lateral elements to be created, but because these elements are so small they are snapped out of existence during the discretization (an unfortunately necessary step in the process). Problems associated with either of these situations will generally result in the error messages described in sections III and IV. To avoid them, try to keep gage locations as far apart as possible, and as far from channel junctions as possible. The insertion of gages at channel junctions is unnecessary because the planes/channels are already split there, and output will therefore be reported by KINEROS2.\n\nThis error occurs when the soil theme used in the land cover and soils parameterization does not completely contain the watershed that is being parameterized. This is only a critical error when a SWAT watershed is being parameterized with SSURGO soils; in such a case, AGWA will prevent the user from proceeding. With any other configuration, AGWA will give the user the option to proceed, but with the warning seen at right. When this error message appears, it could be a result of a hole in the soils coverage or because the soil coverage boundary doesn't extend beyond the watershed boundary. This causes the parameterization of the watershed to have missing or zero values, which results in inaccurate parameterizations and, in the rare case, even prevents AGWA from running to completion. To avoid this problem, you can clip the DEM grid to the soils theme to prevent delineating a watershed beyond the boundary of the soils coverage. Follow the instructions in 'DEM Handling' in the Tips and Tricks section.\n\nDespite attempts to catch this problem early, on certain occasions KINEROS or SWAT will not run completely and no error will be produced. This generally happens when there is a problem with the watershed discretization, and results in no output data being written to certain model elements. To help users catch this problem we have changed the color for 'no data' values in the results visualization to RED (shown to the right). If you see red watershed elements when you view results that means that KINEROS or SWAT must have not run correctly. Unfortunately there is no easy fix for this problem because it results from awkward channel/plane configurations that occur at specific combinations of channel network shape and the user-selected CSA value. We recommend increasing or decreasing the CSA value slightly and trying again.\n\nThis warning occurs when AGWA detects the DEM resolution (grid cell size) is greater than 30 meters. This is not an error in AGWA, rather it is a warning to the user. Coarse resolution grids can cause problems during the SWAT and KINEROS discretizations that may the models to crash or the soil and land cover parameterizations to fail. We have had great success using grids with a resolution at or above 30 meters and recommend, whenever possible, to use grids with 30 meter or better resolution. (Note that a higher number for the grid resolution means a more coarse resolution and a low number for the grid resolution means a high resolution).\n\nThis warning occurs when the user accepts a DEM in the 'Watershed Delineation' dialog and AGWA detects the selected DEM has elevations at or below sea level. This warning has a few purposes: AGWA has trouble filling, delineating, and discretizing DEMS with low elevations and low slopes; the kinematic wave equation used in KINEROS is not applicable in low slope situations; and KINEROS is not applicable in coastal regions.\n\nThis warning occurs when the user delineates a watershed with an area larger than 100 square km and chooses KINEROS to discretize the watershed for in the 'Watershed Discretization' dialog. It serves as a warning to users that KINEROS is not designed to be applied for watersheds larger than 100 square km, though KINEROS will still run successfully.\n\nQuestions and/or comments regarding additional program errors may be directed to:\n\nTeam AGWA: agwa@tucson.ars.ag.gov\n\nAGWA is so helpful and easy to use that it will actually help you to get help! Just select \"How to Get Help\" from the \"Help\" menu and this window will help you to find help for whatever you may need help with. This window is very similar to that of one that appears after the Index of the Help menu is used.\n\nPerhaps the most useful tool in ArcView help is the index feature located under the \"Help\"\n\nHelp may also be obtained by clicking the 'Help' buttons that are present on most of the AGWA dialogs (windows). These buttons will open the User's Manual directly to the section that describes the part of AGWA you are working on when you click the button. ** Note the AGWA help button shown above is only available when the AGWA View is active. menu in the menu bar in the submenu \"Help Topics.\" Here, the user can type in a word that he wishes to learn more about and find a matching topic that will bring up a definition and perhaps an example or how to use the feature in question. This is particularly useful if you are in the middle of an application and would like a brief but informative amount of material to help you further your interests. Other choices in the window are the \"Contents\" and \"Find\" tabs which are more detailed and usually unnecessary variations on the \"Index\" tab. Once a topic is selected, a \"ArcView Help\" window will appear and become a plethora of information to the user and providing a detailed account of actions and features the user may be interested in. Many of the help windows also include an example so that the user can see the steps applied to a practical situation, perhaps similar to their own predicament. The window also includes the option to search the glossary or return to the Help Topics window. Also present in most help windows are links to related topics, that the user may wish to browse at their leisure to obtain a more in-depth answer to their question.\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (17 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (21 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (26 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (27 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (30 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (36 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (37 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (47 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (56 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (59 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (60 of 66)11/5/2004 1:16:35 PM\n\nfile:///C|/AGWA_development/AGWA/documentation/current/AGWA%20User%20Manual.html (61 of 66)11/5/2004 1:16:35 PM"
}